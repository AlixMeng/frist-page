<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="icons/fontawesome/fontawesome-free-6.4.0-web/css/all.min.css">
    <title>Alix go - 个人服务器</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Serif+SC:wght@300;400;500;600;700&family=Ma+Shan+Zheng&family=ZCOOL+XiaoWei&family=ZCOOL+KuaiLe&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-blue: #007AFF;
            --bg-dark: #000000;
            --text-primary: #FFFFFF;
            --text-secondary: rgba(255, 255, 255, 0.6);
            --glass-bg: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.1);
            --transition-fast: 0.15s ease;
            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-blue) transparent;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: 80px;
            line-height: 1.6;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--primary-blue), #00D4FF);
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #00D4FF, var(--primary-blue));
        }

        /* 背景 */
        .bg-gradient {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(ellipse at 20% 0%, rgba(0, 122, 255, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 100%, rgba(0, 150, 255, 0.1) 0%, transparent 50%);
            z-index: -2;
        }

        /* Floating particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(0, 122, 255, 0.4);
            border-radius: 50%;
            animation: float 15s infinite ease-in-out;
        }

        .particle:nth-child(1) { left: 10%; top: 20%; animation-delay: 0s; animation-duration: 20s; }
        .particle:nth-child(2) { left: 20%; top: 80%; animation-delay: 2s; animation-duration: 18s; }
        .particle:nth-child(3) { left: 30%; top: 40%; animation-delay: 4s; animation-duration: 22s; }
        .particle:nth-child(4) { left: 50%; top: 60%; animation-delay: 6s; animation-duration: 19s; }
        .particle:nth-child(5) { left: 70%; top: 30%; animation-delay: 8s; animation-duration: 21s; }
        .particle:nth-child(6) { left: 80%; top: 70%; animation-delay: 10s; animation-duration: 17s; }
        .particle:nth-child(7) { left: 90%; top: 50%; animation-delay: 12s; animation-duration: 23s; }
        .particle:nth-child(8) { left: 15%; top: 60%; animation-delay: 3s; animation-duration: 25s; }

        @keyframes float {
            0%, 100% { 
                transform: translateY(0) translateX(0) scale(1); 
                opacity: 0.3;
            }
            25% { 
                transform: translateY(-30px) translateX(10px) scale(1.2); 
                opacity: 0.6;
            }
            50% { 
                transform: translateY(-20px) translateX(-10px) scale(0.8); 
                opacity: 0.4;
            }
            75% { 
                transform: translateY(-40px) translateX(15px) scale(1.1); 
                opacity: 0.5;
            }
        }

        /* Glow orb */
        .glow-orb {
            position: fixed;
            width: 400px;
            height: 400px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(0, 122, 255, 0.1) 0%, transparent 70%);
            pointer-events: none;
            z-index: -1;
            animation: orbFloat 20s infinite ease-in-out;
        }

        .glow-orb-1 {
            top: -100px;
            left: -100px;
            animation-delay: 0s;
        }

        .glow-orb-2 {
            bottom: -100px;
            right: -100px;
            animation-delay: -10s;
        }

        @keyframes orbFloat {
            0%, 100% { transform: translate(0, 0); }
            33% { transform: translate(30px, -30px); }
            66% { transform: translate(-20px, 20px); }
        }

        /* 顶部状态栏 - 左上角 */
        .top-status-bar {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 12px 20px;
            background: linear-gradient(135deg, rgba(0, 122, 255, 0.15), rgba(0, 212, 255, 0.1));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 122, 255, 0.3);
            border-radius: 16px;
            box-shadow: 0 4px 30px rgba(0, 122, 255, 0.2), 0 0 20px rgba(0, 122, 255, 0.1);
            animation: glowPulse 3s ease-in-out infinite;
        }

        @keyframes glowPulse {
            0%, 100% { box-shadow: 0 4px 30px rgba(0, 122, 255, 0.2), 0 0 20px rgba(0, 122, 255, 0.1); }
            50% { box-shadow: 0 4px 40px rgba(0, 122, 255, 0.35), 0 0 30px rgba(0, 212, 255, 0.2); }
        }

        .top-status-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            padding: 6px 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .top-status-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .top-status-icon {
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, rgba(0, 122, 255, 0.3), rgba(0, 212, 255, 0.2));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .top-status-content {
            display: flex;
            flex-direction: column;
        }

        .top-status-label {
            font-size: 9px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .top-status-value {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
            font-variant-numeric: tabular-nums;
        }

        .top-status-weather {
            cursor: pointer;
        }

        /* 城市选择器 */
        .city-selector {
            position: absolute;
            top: 100%;
            left: 0;
            width: 200px;
            background: rgba(20, 20, 30, 0.95);
            border: 1px solid rgba(0, 122, 255, 0.3);
            border-radius: 12px;
            padding: 12px;
            display: none;
            z-index: 1002;
            backdrop-filter: blur(10px);
        }

        .city-selector.show {
            display: block;
        }

        .city-search-box {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
        }

        .city-search-input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-size: 13px;
        }

        .city-search-input:focus {
            outline: none;
            border-color: var(--primary-blue);
        }

        .city-search-btn {
            padding: 8px 12px;
            background: var(--primary-blue);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-size: 13px;
        }

        .city-list-title {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.5);
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .city-list {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .city-item {
            padding: 6px 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            transition: all 0.2s;
        }

        .city-item:hover {
            background: rgba(0, 122, 255, 0.2);
            border-color: rgba(0, 122, 255, 0.5);
        }

        .weather-item-wrapper {
            position: relative;
        }

        /* 右上角状态栏 */
        .top-status-bar-right {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 12px 20px;
            background: linear-gradient(135deg, rgba(0, 122, 255, 0.15), rgba(0, 212, 255, 0.1));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 122, 255, 0.3);
            border-radius: 16px;
            box-shadow: 0 4px 30px rgba(0, 122, 255, 0.2), 0 0 20px rgba(0, 122, 255, 0.1);
            animation: glowPulse 3s ease-in-out infinite;
        }

        /* 音乐播放列表弹窗 */
        .music-playlist-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 2000;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .music-playlist-modal.show {
            display: flex;
            opacity: 1;
        }

        .music-playlist-panel {
            background: linear-gradient(135deg, rgba(30, 30, 40, 0.98), rgba(20, 20, 30, 0.98));
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            width: 90%;
            max-width: 400px;
            max-height: 70vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .music-playlist-modal.show .music-playlist-panel {
            transform: scale(1);
        }

        .music-playlist-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .music-playlist-header h3 {
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .music-playlist-content {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            max-height: 350px;
        }

        .music-playlist-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .music-playlist-item:hover {
            background: rgba(0, 122, 255, 0.1);
            border-color: rgba(0, 122, 255, 0.3);
        }

        .music-playlist-item.active {
            background: rgba(0, 122, 255, 0.15);
            border-color: rgba(0, 122, 255, 0.5);
        }

        .music-playlist-item-icon {
            font-size: 18px;
            width: 32px;
            height: 32px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .music-playlist-item-name {
            flex: 1;
            font-size: 14px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .music-playlist-item-playing {
            font-size: 12px;
            color: #00D4FF;
            display: none;
        }

        .music-playlist-item.active .music-playlist-item-playing {
            display: block;
        }

        .music-playlist-footer {
            padding: 15px 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .music-player-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .music-control-btn {
            width: 36px;
            height: 36px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: var(--text-primary);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .music-control-btn:hover {
            background: rgba(0, 122, 255, 0.2);
            border-color: rgba(0, 122, 255, 0.5);
            transform: scale(1.1);
        }

        .music-control-btn.play-pause {
            width: 44px;
            height: 44px;
            font-size: 18px;
            background: linear-gradient(135deg, var(--primary-blue), #00D4FF);
            border: none;
        }

        .music-control-btn.play-pause:hover {
            transform: scale(1.15);
            box-shadow: 0 4px 20px rgba(0, 122, 255, 0.4);
        }

        .music-volume-control {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .music-volume-icon {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .music-volume-slider {
            width: 80px;
            height: 4px;
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            outline: none;
        }

        .music-volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            background: var(--primary-blue);
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .music-volume-slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .music-empty {
            text-align: center;
            padding: 40px 20px;
            color: rgba(255, 255, 255, 0.4);
        }

        /* 右下角音乐控制 */
        .music-control {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1001;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 50%;
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 24px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .music-control:hover {
            background: rgba(0, 122, 255, 0.2);
            border-color: rgba(0, 122, 255, 0.5);
            transform: scale(1.1);
        }

        .music-control.playing {
            animation: pulse 2s infinite;
            background: rgba(0, 122, 255, 0.3);
            border-color: rgba(0, 122, 255, 0.8);
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(0, 122, 255, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(0, 122, 255, 0); }
        }

        .music-control::after {
            content: '';
            position: absolute;
            bottom: -30px;
            right: 0;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 11px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .music-control:hover::after {
            opacity: 1;
        }

        .music-control[data-state="off"]::after {
            content: '点击播放音乐';
        }

        .music-control[data-state="on"]::after {
            content: '点击暂停音乐';
        }

        /* 登录和管理按钮 - 右侧状态栏 */
        .right-status-bar {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 16px;
            background: linear-gradient(135deg, rgba(0, 122, 255, 0.15), rgba(0, 212, 255, 0.1));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 122, 255, 0.3);
            border-radius: 16px;
            box-shadow: 0 4px 30px rgba(0, 122, 255, 0.2), 0 0 20px rgba(0, 122, 255, 0.1);
        }

        .right-status-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
            color: var(--text-primary);
            border: none;
        }

        .right-status-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .right-status-icon {
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, rgba(0, 122, 255, 0.3), rgba(0, 212, 255, 0.2));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .right-status-item.admin-only {
            display: none;
        }

        .right-status-item.admin-only.show {
            display: flex;
        }

        /* 登录按钮 */
        .login-btn {
            position: fixed;
            top: 20px;
            right: 80px;
            z-index: 1001;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 10px 20px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .login-btn:hover {
            background: rgba(0, 122, 255, 0.25);
            border-color: rgba(0, 122, 255, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 122, 255, 0.3);
        }

        .login-btn.logged-in {
            background: rgba(52, 199, 89, 0.2);
            border-color: rgba(52, 199, 89, 0.5);
        }

        /* 管理按钮 */
        .admin-btn {
            position: fixed;
            top: 20px;
            right: 150px;
            z-index: 1001;
            background: linear-gradient(135deg, rgba(0, 122, 255, 0.3), rgba(0, 212, 255, 0.2));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 122, 255, 0.5);
            border-radius: 25px;
            padding: 10px 20px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            display: none;
            align-items: center;
            gap: 6px;
            animation: pulse 2s infinite;
        }

        .admin-btn:hover {
            transform: scale(1.05) translateY(-2px);
            background: linear-gradient(135deg, rgba(0, 122, 255, 0.5), rgba(0, 212, 255, 0.4));
            box-shadow: 0 8px 25px rgba(0, 122, 255, 0.4);
        }

        .admin-btn.show {
            display: flex;
        }

        /* 弹窗遮罩 */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 2000;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.show {
            display: flex;
            opacity: 1;
        }

        /* 登录弹窗 */
        .login-modal {
            background: linear-gradient(135deg, rgba(30, 30, 40, 0.95), rgba(20, 20, 30, 0.95));
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .modal-overlay.show .login-modal {
            transform: scale(1);
        }

        .login-modal h2 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 24px;
            background: linear-gradient(135deg, #fff, #00D4FF);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .login-form input {
            width: 100%;
            padding: 15px 20px;
            margin-bottom: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .login-form input:focus {
            outline: none;
            border-color: rgba(0, 122, 255, 0.5);
            background: rgba(255, 255, 255, 0.08);
        }

        .login-form button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, var(--primary-blue), #00D4FF);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .login-form button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 122, 255, 0.4);
        }

        .login-error {
            color: #FF375F;
            text-align: center;
            margin-top: 15px;
            font-size: 14px;
            display: none;
        }

        .login-error.show {
            display: block;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 50%;
            color: var(--text-primary);
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        /* 管理面板 */
        .admin-panel {
            background: linear-gradient(135deg, rgba(30, 30, 40, 0.98), rgba(20, 20, 30, 0.98));
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            width: 90%;
            max-width: 800px;
            max-height: 85vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .modal-overlay.show .admin-panel {
            transform: scale(1);
        }

        .admin-header {
            padding: 20px 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-header h2 {
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .admin-tabs {
            display: flex;
            gap: 10px;
            padding: 0 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .admin-tab {
            padding: 12px 20px;
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.5);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }

        .admin-tab:hover {
            color: var(--text-primary);
        }

        .admin-tab.active {
            color: var(--primary-blue);
            border-bottom-color: var(--primary-blue);
        }

        .admin-content {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
        }

        .admin-section {
            display: none;
        }

        .admin-section.active {
            display: block;
        }

        .admin-section h3 {
            margin-bottom: 20px;
            color: var(--primary-blue);
        }

        .admin-item {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            display: grid;
            grid-template-columns: 60px 1fr 1fr 1fr 40px;
            gap: 10px;
            align-items: center;
        }

        .admin-item input {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 10px;
            color: var(--text-primary);
            font-size: 14px;
        }

        .admin-item input:focus {
            outline: none;
            border-color: rgba(0, 122, 255, 0.5);
        }

        .admin-item .delete-btn {
            width: 36px;
            height: 36px;
            background: rgba(255, 55, 95, 0.2);
            border: 1px solid rgba(255, 55, 95, 0.3);
            border-radius: 8px;
            color: #FF375F;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .admin-item .delete-btn:hover {
            background: rgba(255, 55, 95, 0.3);
        }

        .add-btn {
            width: 100%;
            padding: 15px;
            background: rgba(0, 122, 255, 0.1);
            border: 2px dashed rgba(0, 122, 255, 0.3);
            border-radius: 12px;
            color: var(--primary-blue);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .add-btn:hover {
            background: rgba(0, 122, 255, 0.2);
            border-color: rgba(0, 122, 255, 0.5);
        }

        .admin-footer {
            padding: 20px 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .admin-footer button {
            padding: 12px 30px;
            border-radius: 10px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cancel-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }

        .cancel-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .reset-btn {
            background: rgba(255, 55, 95, 0.1);
            border: 1px solid rgba(255, 55, 95, 0.3);
            color: #FF375F;
            margin-right: auto;
        }

        .reset-btn:hover {
            background: rgba(255, 55, 95, 0.2);
        }

        .save-btn {
            background: linear-gradient(135deg, var(--primary-blue), #00D4FF);
            border: none;
            color: white;
            font-weight: 600;
        }

        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 122, 255, 0.4);
        }

        .quote-editor textarea {
            width: 100%;
            height: 300px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            color: var(--text-primary);
            font-size: 14px;
            line-height: 1.6;
            resize: vertical;
            font-family: inherit;
        }

        .quote-editor textarea:focus {
            outline: none;
            border-color: rgba(0, 122, 255, 0.5);
        }

        .quote-hint-text {
            color: rgba(255, 255, 255, 0.4);
            font-size: 12px;
            margin-top: 10px;
        }

        /* 图标选择器 */
        .icon-selector {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .icon-input {
            width: 60px;
            text-align: center;
            font-size: 20px;
        }

        .icon-url-input {
            flex: 1;
        }

        .icon-preview {
            width: 44px;
            height: 44px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            overflow: hidden;
        }

        .icon-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* 音乐上传区域 - 紧凑版 */
        .music-upload-compact {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 122, 255, 0.03);
            border: 1px solid rgba(0, 122, 255, 0.15);
            border-radius: 10px;
        }

        .upload-row {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .select-file-btn {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 6px;
            padding: 8px 16px;
            color: var(--text-primary);
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .select-file-btn:hover {
            background: rgba(255, 255, 255, 0.12);
            border-color: rgba(0, 122, 255, 0.4);
        }

        .selected-files {
            flex: 1;
            font-size: 13px;
            color: rgba(255, 255, 255, 0.5);
            min-width: 100px;
        }

        .upload-confirm-btn {
            background: linear-gradient(135deg, rgba(0, 122, 255, 0.4), rgba(0, 212, 255, 0.3));
            border: 1px solid rgba(0, 122, 255, 0.5);
            border-radius: 6px;
            padding: 8px 16px;
            color: white;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .upload-confirm-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, rgba(0, 122, 255, 0.5), rgba(0, 212, 255, 0.4));
            transform: translateY(-1px);
        }

        .upload-confirm-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .upload-types-compact {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.3);
            margin-top: 8px;
        }

        .clear-files-btn {
            background: rgba(255, 55, 95, 0.1);
            border: 1px solid rgba(255, 55, 95, 0.3);
            border-radius: 6px;
            padding: 8px 16px;
            color: #FF375F;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .clear-files-btn:hover {
            background: rgba(255, 55, 95, 0.2);
        }

        .pending-files-list {
            margin-top: 15px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 8px;
            padding: 12px;
            max-height: 250px;
            overflow-y: auto;
        }

        .pending-header {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .pending-file-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 10px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 6px;
            margin-bottom: 6px;
            font-size: 13px;
        }

        .pending-file-item:last-child {
            margin-bottom: 0;
        }

        .pending-file-item.invalid {
            background: rgba(255, 55, 95, 0.05);
            border: 1px solid rgba(255, 55, 95, 0.1);
        }

        .pending-file-icon {
            font-size: 18px;
        }

        .pending-file-name {
            flex: 1;
            color: var(--text-primary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .pending-file-name.invalid {
            color: rgba(255, 55, 95, 0.7);
            text-decoration: line-through;
        }

        .pending-file-size {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.4);
        }

        .pending-file-remove {
            width: 24px;
            height: 24px;
            background: rgba(255, 55, 95, 0.1);
            border: none;
            border-radius: 4px;
            color: #FF375F;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .pending-file-remove:hover {
            background: rgba(255, 55, 95, 0.2);
        }

        .pending-file-status {
            font-size: 11px;
            padding: 2px 8px;
            border-radius: 4px;
        }

        .pending-file-status.valid {
            background: rgba(52, 199, 89, 0.1);
            color: #34C759;
        }

        .pending-file-status.invalid {
            background: rgba(255, 55, 95, 0.1);
            color: #FF375F;
        }

        .upload-progress-compact {
            margin-top: 10px;
        }

        .progress-bar-compact {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 6px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #007AFF, #00D4FF);
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            font-size: 13px;
            color: rgba(255, 255, 255, 0.6);
        }

        .music-list-item {
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 12px 15px;
            margin-bottom: 10px;
        }

        .music-icon {
            font-size: 24px;
        }

        .music-name {
            flex: 1;
            font-size: 14px;
            color: var(--text-primary);
        }

        .music-status {
            font-size: 12px;
            padding: 4px 10px;
            border-radius: 6px;
        }

        .music-status.uploaded {
            background: rgba(52, 199, 89, 0.2);
            color: #34C759;
        }

        .music-status.pending {
            background: rgba(255, 149, 0, 0.2);
            color: #FF9500;
        }

        /* 名言列表编辑器 */
        .quotes-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .action-btn {
            background: rgba(0, 122, 255, 0.1);
            border: 1px solid rgba(0, 122, 255, 0.3);
            border-radius: 8px;
            padding: 10px 20px;
            color: var(--primary-blue);
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            background: rgba(0, 122, 255, 0.2);
        }

        .quote-list-editor {
            max-height: 400px;
            overflow-y: auto;
        }

        .quote-item-row {
            display: grid;
            grid-template-columns: 1fr 120px 40px;
            gap: 10px;
            align-items: center;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 8px;
        }

        .quote-item-row input {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            padding: 8px 12px;
            color: var(--text-primary);
            font-size: 13px;
        }

        .quote-item-row input:focus {
            outline: none;
            border-color: rgba(0, 122, 255, 0.5);
        }

        .quote-delete-btn {
            width: 36px;
            height: 36px;
            background: rgba(255, 55, 95, 0.1);
            border: 1px solid rgba(255, 55, 95, 0.3);
            border-radius: 6px;
            color: #FF375F;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .quote-delete-btn:hover {
            background: rgba(255, 55, 95, 0.2);
        }

        /* 主内容区 - 全屏滚动 */
        html, body {
            height: 100%;
            overflow: hidden;
            scroll-behavior: smooth;
        }

        .main-content {
            height: 100vh;
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
            scroll-behavior: smooth;
        }

        .section-full {
            min-height: 100vh;
            scroll-snap-align: start;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 100px 15px 60px;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
        }

        /* Section animations */
        .section-full {
            opacity: 0;
            transform: translateY(30px);
            animation: sectionFadeIn 0.8s ease forwards;
        }

        .section-full:nth-child(1) { animation-delay: 0s; }
        .section-full:nth-child(2) { animation-delay: 0.2s; }
        .section-full:nth-child(3) { animation-delay: 0.4s; }
        .section-full:nth-child(4) { animation-delay: 0.6s; }

        @keyframes sectionFadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-full:last-child {
            margin-bottom: 80px;
        }

        /* 滚动提示 */
        .scroll-hint {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            color: var(--text-secondary);
            font-size: 13px;
            animation: bounce 2s infinite;
            cursor: pointer;
        }

        .scroll-hint span {
            display: block;
            margin-bottom: 5px;
        }

        .scroll-arrow {
            font-size: 20px;
            animation: bounceArrow 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
            40% { transform: translateX(-50%) translateY(-10px); }
            60% { transform: translateX(-50%) translateY(-5px); }
        }

        @keyframes bounceArrow {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(10px); }
            60% { transform: translateY(5px); }
        }

        /* 名言轮播 - 全屏居中 - 超大边框炫酷设计 */
        .quote-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            margin-bottom: 0;
            padding: 60px 30px 0;
        }

        .quote-container {
            max-width: 950px;
            width: 100%;
            margin: 0 auto;
            padding: 50px 70px;
            background: 
                linear-gradient(135deg, rgba(0, 122, 255, 0.05) 0%, rgba(0, 212, 255, 0.02) 50%, rgba(255, 255, 255, 0.02) 100%);
            border: 2px solid rgba(255, 255, 255, 0.15);
            border-radius: 40px;
            position: relative;
            overflow: visible;
            text-align: center;
            backdrop-filter: blur(30px);
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.4),
                0 0 100px rgba(0, 122, 255, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.15);
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        /* 站点名称样式 */
        .site-name {
            font-size: 42px;
            font-weight: 700;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #fff, #00D4FF);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 4px;
            text-shadow: 0 2px 20px rgba(0, 122, 255, 0.3);
        }

        .quote-container:hover {
            transform: scale(1.02);
            box-shadow: 
                0 30px 80px rgba(0, 0, 0, 0.5),
                0 0 150px rgba(0, 122, 255, 0.2),
                0 0 60px rgba(0, 212, 255, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.25);
        }

        /* 多层发光边框效果 */
        .quote-container::before {
            content: '';
            position: absolute;
            inset: -4px;
            border-radius: 44px;
            padding: 2px;
            background: linear-gradient(135deg, rgba(0, 122, 255, 0.5), rgba(0, 212, 255, 0.3), rgba(255, 255, 255, 0.2), rgba(0, 122, 255, 0.4));
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            pointer-events: none;
        }

        .quote-container::after {
            content: '';
            position: absolute;
            inset: -8px;
            border-radius: 48px;
            border: 1px solid rgba(0, 122, 255, 0.1);
            pointer-events: none;
        }

        /* 角落装饰 */
        .quote-corner {
            position: absolute;
            width: 60px;
            height: 60px;
            border: 2px solid rgba(0, 122, 255, 0.3);
            pointer-events: none;
        }

        .quote-corner.top-left {
            top: 20px;
            left: 20px;
            border-right: none;
            border-bottom: none;
            border-radius: 20px 0 0 0;
        }

        .quote-corner.top-right {
            top: 20px;
            right: 20px;
            border-left: none;
            border-bottom: none;
            border-radius: 0 20px 0 0;
        }

        .quote-corner.bottom-left {
            bottom: 20px;
            left: 20px;
            border-right: none;
            border-top: none;
            border-radius: 0 0 0 20px;
        }

        .quote-corner.bottom-right {
            bottom: 20px;
            right: 20px;
            border-left: none;
            border-top: none;
            border-radius: 0 0 20px 0;
        }

        .quote-icon {
            font-size: 60px;
            background: linear-gradient(135deg, rgba(0, 122, 255, 0.8), rgba(0, 212, 255, 0.6));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 30px;
            line-height: 1;
            opacity: 0.8;
        }

        /* 多种字体样式 - 包含中文字体 */
        .quote-text {
            font-size: 44px;
            font-weight: 500;
            line-height: 1.6;
            margin-bottom: 30px;
            min-height: 140px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            color: #FFFFFF;
            letter-spacing: 2px;
            text-shadow: 0 2px 20px rgba(0, 122, 255, 0.3);
        }

        /* 亮色系颜色类 - 确保与黑色背景反差大 */
        .quote-text.color-1 { color: #FFFFFF; text-shadow: 0 2px 20px rgba(255, 255, 255, 0.3); } /* 纯白 */
        .quote-text.color-2 { color: #00D4FF; text-shadow: 0 2px 20px rgba(0, 212, 255, 0.4); } /* 青色 */
        .quote-text.color-3 { color: #5AC8FA; text-shadow: 0 2px 20px rgba(90, 200, 250, 0.4); } /* 天蓝 */
        .quote-text.color-4 { color: #34C759; text-shadow: 0 2px 20px rgba(52, 199, 89, 0.4); } /* 绿色 */
        .quote-text.color-5 { color: #FF375F; text-shadow: 0 2px 20px rgba(255, 55, 95, 0.4); } /* 粉红 */
        .quote-text.color-6 { color: #FF9500; text-shadow: 0 2px 20px rgba(255, 149, 0, 0.4); } /* 橙色 */
        .quote-text.color-7 { color: #FFD60A; text-shadow: 0 2px 20px rgba(255, 214, 10, 0.4); } /* 黄色 */
        .quote-text.color-8 { color: #BF5AF2; text-shadow: 0 2px 20px rgba(191, 90, 242, 0.4); } /* 紫色 */
        .quote-text.color-9 { color: #64D2FF; text-shadow: 0 2px 20px rgba(100, 210, 255, 0.4); } /* 浅蓝 */
        .quote-text.color-10 { color: #FF6B35; text-shadow: 0 2px 20px rgba(255, 107, 53, 0.4); } /* 珊瑚橙 */

        /* 字体风格 1: 宋体（衬线）- Noto Serif SC */
        .quote-text.style-1 {
            font-family: 'Noto Serif SC', 'Songti SC', 'STSong', 'SimSun', serif;
            font-weight: 500;
            letter-spacing: 4px;
            font-size: 44px;
        }

        /* 字体风格 2: 楷体 */
        .quote-text.style-2 {
            font-family: 'KaiTi', 'STKaiti', '楷体', 'Noto Serif SC', serif;
            font-weight: 500;
            letter-spacing: 5px;
            font-size: 48px;
        }

        /* 字体风格 3: 马善政书法（书法风格） */
        .quote-text.style-3 {
            font-family: 'Ma Shan Zheng', 'STXingkai', 'Xingkai SC', cursive;
            font-weight: 400;
            letter-spacing: 6px;
            font-size: 50px;
            line-height: 1.5;
        }

        /* 字体风格 4: 小薇体（手写体） */
        .quote-text.style-4 {
            font-family: 'ZCOOL XiaoWei', 'STXingkai', 'Xingkai SC', serif;
            font-weight: 400;
            letter-spacing: 4px;
            font-size: 46px;
        }

        /* 字体风格 5: 快乐体（艺术体） */
        .quote-text.style-5 {
            font-family: 'ZCOOL KuaiLe', 'STHeiti', 'SimHei', sans-serif;
            font-weight: 400;
            letter-spacing: 3px;
            font-size: 46px;
        }

        /* 字体风格 6: 隶书风格 */
        .quote-text.style-6 {
            font-family: 'LiSu', 'STLiti', '隶书', 'Noto Serif SC', serif;
            font-weight: 500;
            letter-spacing: 5px;
            font-size: 48px;
        }

        /* 字体风格 7: 仿宋 */
        .quote-text.style-7 {
            font-family: 'FangSong', 'STFangsong', '仿宋', 'Noto Serif SC', serif;
            font-weight: 500;
            letter-spacing: 4px;
            font-size: 46px;
        }

        /* 字体风格 8: 黑体（现代）- 英文风格，保持较小字体 */
        .quote-text.style-8 {
            font-family: 'Inter', 'PingFang SC', 'Microsoft YaHei', '黑体', sans-serif;
            font-weight: 600;
            letter-spacing: 2px;
            font-size: 38px;
        }

        /* 字体风格 9: 渐变科技感 - 英文风格，保持较小字体 */
        .quote-text.style-9 {
            font-family: 'Inter', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            font-weight: 600;
            letter-spacing: 1px;
            font-size: 36px;
            background: linear-gradient(135deg, #FFFFFF 0%, #00D4FF 50%, #007AFF 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: none;
        }

        /* 字体风格 10: 金色华丽 */
        .quote-text.style-10 {
            font-family: 'Noto Serif SC', 'Songti SC', serif;
            font-weight: 600;
            letter-spacing: 4px;
            font-size: 44px;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #FF8C00 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: none;
        }

        /* 点击切换提示 */
        .quote-hint {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.3);
            margin-top: 25px;
            letter-spacing: 2px;
            text-transform: uppercase;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .quote-container:hover .quote-hint {
            opacity: 1;
        }

        .quote-author {
            font-size: 14px;
            color: rgba(0, 122, 255, 0.8);
            font-weight: 500;
            letter-spacing: 1px;
            text-transform: uppercase;
            position: relative;
            display: inline-block;
            padding: 0 20px;
        }

        .quote-author::before,
        .quote-author::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 30px;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(0, 122, 255, 0.4));
        }

        .quote-author::before {
            right: 100%;
        }

        .quote-author::after {
            left: 100%;
            background: linear-gradient(90deg, rgba(0, 122, 255, 0.4), transparent);
        }

        .quote-dots {
            display: flex;
            justify-content: center;
            gap: 6px;
            margin-top: 28px;
        }

        /* 摄影作品 - 全屏布局 */

        /* 摄影作品 - 全屏布局 */
        .gallery-section {
            margin-bottom: 0;
            justify-content: center;
            padding: 80px 15px 40px;
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 25px;
            padding: 0 5px;
        }

        .section-title {
            font-size: 24px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
            letter-spacing: 0.5px;
            text-shadow: 0 2px 15px rgba(0, 122, 255, 0.3);
        }

        .section-title::before {
            content: '';
            width: 5px;
            height: 26px;
            background: linear-gradient(180deg, var(--primary-blue), #00D4FF);
            border-radius: 3px;
            box-shadow: 0 0 15px rgba(0, 122, 255, 0.5);
        }

        .gallery-tabs {
            display: flex;
            gap: 8px;
        }

        .gallery-tab {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 6px 14px;
            color: rgba(255, 255, 255, 0.5);
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }

        .gallery-tab:hover {
            background: rgba(255, 255, 255, 0.12);
            color: var(--text-primary);
        }

        .gallery-tab.active {
            background: linear-gradient(135deg, var(--primary-blue), #00D4FF);
            color: white;
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 20px;
        }

        @media (max-width: 900px) {
            .gallery-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .top-status-bar {
                top: 10px;
                left: 10px;
                padding: 10px 14px;
                gap: 10px;
            }
            
            .top-status-item {
                padding: 4px 8px;
            }
            
            .top-status-label {
                display: none;
            }
        }

        @media (max-width: 600px) {
            .gallery-grid {
                grid-template-columns: 1fr;
            }
        }

        .gallery-item {
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            aspect-ratio: 4/5;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .gallery-item:hover {
            transform: translateY(-8px) scale(1.03);
            box-shadow: 
                0 20px 50px rgba(0, 122, 255, 0.3),
                0 0 40px rgba(0, 122, 255, 0.15);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease;
            position: absolute;
            top: 0;
            left: 0;
        }

        .gallery-item img.fade-out {
            opacity: 0;
            transform: scale(1.08);
        }

        .gallery-item img.fade-in {
            opacity: 1;
            transform: scale(1);
        }

        .gallery-item:hover img {
            transform: scale(1.12);
        }

        .gallery-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 30px 18px 18px;
            background: linear-gradient(transparent 0%, rgba(0, 0, 0, 0.6) 40%, rgba(0, 0, 0, 0.9) 100%);
            opacity: 0;
            transform: translateY(15px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .gallery-item:hover .gallery-overlay {
            opacity: 1;
            transform: translateY(0);
        }

        .gallery-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 6px;
            color: rgba(255, 255, 255, 0.98);
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .gallery-desc {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.7);
            text-shadow: 0 1px 5px rgba(0, 0, 0, 0.5);
        }

        .gallery-more {
            text-align: center;
            margin-top: 5px;
        }

        .gallery-more-link {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            color: var(--primary-blue);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            padding: 10px 24px;
            border: 1px solid var(--primary-blue);
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        .gallery-more-link:hover {
            background: var(--primary-blue);
            color: white;
        }

        /* 应用导航 - 全屏布局 */
        .apps-section {
            margin-bottom: 0;
            justify-content: flex-start;
            padding-top: 160px;
        }

        .apps-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 14px;
            max-width: 700px;
            margin: 0 auto;
        }

        @media (max-width: 700px) {
            .apps-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 500px) {
            .apps-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .app-item {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 20px 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none;
            color: inherit;
            display: block;
            position: relative;
            overflow: hidden;
        }

        .app-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(0, 122, 255, 0.5), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .app-item:hover {
            transform: translateY(-8px) scale(1.02);
            background: linear-gradient(135deg, rgba(0, 122, 255, 0.15) 0%, rgba(0, 122, 255, 0.08) 100%);
            border-color: rgba(0, 122, 255, 0.4);
            box-shadow: 
                0 15px 40px rgba(0, 122, 255, 0.25),
                0 0 30px rgba(0, 122, 255, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .app-item:hover::before {
            opacity: 1;
        }

        .app-icon {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, rgba(0, 122, 255, 0.8), rgba(0, 212, 255, 0.8));
            border-radius: 12px;
            margin: 0 auto 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            box-shadow: 0 4px 15px rgba(0, 122, 255, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .app-item:hover .app-icon {
            transform: scale(1.15);
            box-shadow: 0 8px 25px rgba(0, 122, 255, 0.5);
        }

        .app-name {
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 2px;
            color: rgba(255, 255, 255, 0.9);
        }

        .app-desc {
            font-size: 10px;
            color: rgba(255, 255, 255, 0.4);
        }

        /* 底部浮动常用网址 - 精致胶囊设计 */
        .bottom-favorites {
            position: fixed;
            bottom: 16px;
            left: 50%;
            transform: translateX(-50%);
            height: 56px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 28px;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 0 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .bottom-favorite-item {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            color: rgba(255, 255, 255, 0.6);
            text-decoration: none;
            font-size: 20px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .bottom-favorite-item:hover {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.95);
            transform: translateY(-2px) scale(1.1);
        }

        /* Tooltip */
        .bottom-favorite-item::after {
            content: attr(data-name);
            position: absolute;
            bottom: 55px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            pointer-events: none;
            z-index: 1002;
        }

        .bottom-favorite-item::before {
            content: '';
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: rgba(0, 0, 0, 0.9);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            pointer-events: none;
            z-index: 1002;
        }

        .bottom-favorite-item:hover::after,
        .bottom-favorite-item:hover::before {
            opacity: 1;
            visibility: visible;
        }

        .bottom-favorite-item span {
            display: none;
        }

        .bottom-favorite-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        @media (max-width: 768px) {
            .bottom-favorites {
                padding: 0 8px;
                gap: 2px;
            }
            
            .bottom-favorite-item {
                width: 40px;
                height: 40px;
            }
            
            .bottom-favorite-icon {
                font-size: 18px;
            }
        }
            
            .bottom-favorite-item span:last-child {
                display: none;
            }
        }

        /* 动画 */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 现代风格的导航项卡片 */
        .nav-item-row {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 16px 20px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            margin-bottom: 12px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .nav-item-row:hover {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.04));
            border-color: rgba(0, 122, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .nav-item-row .nav-icon-box {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
        }

        .nav-item-row .nav-icon-display {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, rgba(0, 122, 255, 0.15), rgba(0, 212, 255, 0.1));
            border: 2px solid rgba(0, 122, 255, 0.3);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 122, 255, 0.2);
        }

        .nav-item-row .nav-icon-display:hover {
            background: linear-gradient(135deg, rgba(0, 122, 255, 0.25), rgba(0, 212, 255, 0.2));
            border-color: rgba(0, 122, 255, 0.5);
            transform: scale(1.05);
        }

        .nav-item-row .nav-icon-display img {
            width: 28px;
            height: 28px;
            object-fit: contain;
        }

        .nav-item-row .icon-action-btn {
            width: 32px;
            height: 32px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-item-row .icon-action-btn:hover {
            background: rgba(0, 122, 255, 0.2);
            border-color: rgba(0, 122, 255, 0.4);
            transform: translateY(-2px);
        }

        .nav-item-row .icon-action-btn.upload:hover {
            background: rgba(52, 199, 89, 0.2);
            border-color: rgba(52, 199, 89, 0.4);
        }

        .nav-item-row .nav-name {
            width: 140px;
            padding: 10px 14px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-item-row .nav-name:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(0, 122, 255, 0.5);
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }

        .nav-item-row .nav-url {
            flex: 1;
            padding: 10px 14px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 13px;
            transition: all 0.3s ease;
        }

        .nav-item-row .nav-url:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(0, 122, 255, 0.5);
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
            color: var(--text-primary);
        }

        .nav-item-row .delete-btn {
            width: 36px;
            height: 36px;
            background: rgba(255, 55, 95, 0.1);
            border: 1px solid rgba(255, 55, 95, 0.2);
            border-radius: 10px;
            color: #FF375F;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-item-row .delete-btn:hover {
            background: rgba(255, 55, 95, 0.25);
            border-color: rgba(255, 55, 95, 0.4);
            transform: scale(1.1);
        }

        @media (max-width: 768px) {
            .nav-item-row {
                flex-wrap: wrap;
                padding: 12px;
                gap: 10px;
            }

            .nav-item-row .nav-icon-box {
                order: 0;
            }

            .nav-item-row .nav-name {
                width: calc(100% - 70px);
                order: 1;
            }

            .nav-item-row .nav-url {
                width: 100%;
                order: 2;
            }

            .nav-item-row .delete-btn {
                order: 3;
                margin-left: auto;
            }
        }

        /* 图标库弹窗 */
        .icon-library-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            z-index: 3000;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .icon-library-modal.show {
            display: flex;
        }

        .icon-library-panel {
            background: linear-gradient(135deg, rgba(30, 30, 40, 0.98), rgba(20, 20, 30, 0.98));
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .icon-library-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .icon-library-header h3 {
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .icon-search {
            padding: 15px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .icon-search input {
            width: 100%;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 14px;
        }

        .icon-search input:focus {
            outline: none;
            border-color: rgba(0, 122, 255, 0.5);
        }

        .icon-library-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .icon-category {
            margin-bottom: 20px;
        }

        .icon-category-title {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.5);
            margin-bottom: 12px;
            padding-left: 4px;
        }

        .icon-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
            gap: 8px;
        }

        .icon-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 12px 8px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .icon-option:hover {
            background: rgba(0, 122, 255, 0.1);
            border-color: rgba(0, 122, 255, 0.3);
            transform: translateY(-2px);
        }

        .icon-option-emoji {
            font-size: 28px;
            line-height: 1;
        }

        .icon-option-name {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.6);
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%;
        }

        /* 站点设置样式 */
        .settings-section {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .setting-item {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 24px;
        }

        .setting-item label {
            display: block;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 12px;
            font-weight: 500;
        }

        .setting-item input[type="text"] {
            width: 100%;
            max-width: 400px;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 14px;
            margin-bottom: 12px;
        }

        .setting-item input[type="text"]:focus {
            outline: none;
            border-color: rgba(0, 122, 255, 0.5);
            background: rgba(255, 255, 255, 0.08);
        }

        .settings-actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        /* 账户管理样式 */
        .account-form {
            max-width: 500px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 8px;
        }

        .form-group input {
            width: 100%;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 14px;
        }

        .form-group input:focus {
            outline: none;
            border-color: rgba(0, 122, 255, 0.5);
            background: rgba(255, 255, 255, 0.08);
        }

        .current-user-display {
            padding: 12px 16px;
            background: rgba(0, 122, 255, 0.1);
            border: 1px solid rgba(0, 122, 255, 0.3);
            border-radius: 10px;
            color: var(--primary-blue);
            font-size: 14px;
            font-weight: 500;
        }

        .account-hint {
            margin-top: 16px;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.4);
        }

        .account-message {
            margin-top: 12px;
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 13px;
            display: none;
        }

        .account-message.success {
            display: block;
            background: rgba(52, 199, 89, 0.1);
            border: 1px solid rgba(52, 199, 89, 0.3);
            color: #34C759;
        }

        .account-message.error {
            display: block;
            background: rgba(255, 55, 95, 0.1);
            border: 1px solid rgba(255, 55, 95, 0.3);
            color: #FF375F;
        }

        /* 密码保护遮罩层 */
        .page-lock-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.95), rgba(20, 20, 30, 0.98));
            backdrop-filter: blur(20px);
            z-index: 9999;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .page-lock-overlay.show {
            display: flex;
        }

        .page-lock-content {
            text-align: center;
            padding: 60px 50px;
            background: linear-gradient(135deg, rgba(30, 30, 40, 0.98), rgba(20, 20, 30, 0.98));
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            max-width: 400px;
            width: 90%;
        }

        .page-lock-icon {
            font-size: 60px;
            margin-bottom: 20px;
            opacity: 0.8;
        }

        .page-lock-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #fff, #00D4FF);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .page-lock-subtitle {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.5);
            margin-bottom: 30px;
        }

        .page-lock-input {
            width: 100%;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 16px;
            text-align: center;
            letter-spacing: 8px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .page-lock-input:focus {
            outline: none;
            border-color: rgba(0, 122, 255, 0.5);
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }

        .page-lock-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--primary-blue), #00D4FF);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .page-lock-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 122, 255, 0.4);
        }

        .page-lock-error {
            color: #FF375F;
            font-size: 14px;
            margin-top: 15px;
            display: none;
        }

        .page-lock-error.show {
            display: block;
        }

        /* 开关样式 */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 32px;
            margin-bottom: 10px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 10;
            cursor: pointer;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.1);
            transition: .3s;
            border-radius: 32px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            z-index: 5;
            pointer-events: none;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 24px;
            width: 24px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .3s;
            border-radius: 50%;
        }

        .toggle-switch input:checked + .toggle-slider {
            background-color: rgba(0, 122, 255, 0.5);
            border-color: rgba(0, 122, 255, 0.5);
        }

        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(28px);
        }

        .setting-hint {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.4);
            margin-top: 8px;
        }

        /* 主机导航样式 */
        .servers-section {
            padding: 80px 60px;
        }

        .servers-last-check {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.4);
            margin-top: 5px;
        }

        .servers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .server-item {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            color: var(--text-primary);
        }

        .server-item:hover {
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .server-icon {
            width: 48px;
            height: 48px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
        }

        .server-info {
            flex: 1;
            min-width: 0;
        }

        .server-name {
            font-size: 15px;
            font-weight: 500;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .server-url {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .server-status {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        .server-status.online {
            background: #34C759;
            box-shadow: 0 0 8px rgba(52, 199, 89, 0.6);
        }

        .server-status.offline {
            background: rgba(255, 255, 255, 0.2);
        }

        .server-status.checking {
            background: #FFD60A;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* 主机管理编辑器样式 */
        .server-list-editor {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }

        .server-item-row {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            padding: 12px;
        }

        .server-item-icon {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }

        .server-item-inputs {
            flex: 1;
            display: flex;
            gap: 10px;
        }

        .server-item-inputs input {
            flex: 1;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            color: var(--text-primary);
            font-size: 13px;
        }

        .server-item-inputs input:focus {
            outline: none;
            border-color: rgba(0, 122, 255, 0.5);
        }

        .server-delete-btn {
            width: 32px;
            height: 32px;
            background: rgba(255, 55, 95, 0.2);
            border: 1px solid rgba(255, 55, 95, 0.3);
            border-radius: 6px;
            color: #FF375F;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .server-delete-btn:hover {
            background: rgba(255, 55, 95, 0.3);
        }

        /* 主题样式设置 */
        .theme-presets h4,
        .theme-custom h4,
        .theme-fonts h4,
        .theme-radius h4 {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 15px;
            margin-top: 25px;
        }

        .preset-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .preset-item {
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .preset-item:hover {
            transform: translateY(-3px);
        }

        .preset-item.active .preset-preview {
            box-shadow: 0 0 0 3px var(--primary-blue);
        }

        .preset-preview {
            width: 80px;
            height: 60px;
            border-radius: 8px;
            margin: 0 auto 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .preset-item span {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.6);
        }

        .preset-preview.default-theme {
            background: linear-gradient(135deg, #007AFF, #000000);
        }

        .preset-preview.dark-theme {
            background: linear-gradient(135deg, #1a1a1a, #0d0d0d);
        }

        .preset-preview.ocean-theme {
            background: linear-gradient(135deg, #0066CC, #003366);
        }

        .preset-preview.forest-theme {
            background: linear-gradient(135deg, #228B22, #0d3310);
        }

        .preset-preview.sunset-theme {
            background: linear-gradient(135deg, #FF6B35, #4a1a1a);
        }

        .preset-preview.purple-theme {
            background: linear-gradient(135deg, #8B5CF6, #1a0d33);
        }

        .color-settings {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .color-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .color-item label {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.7);
        }

        .color-item input[type="color"] {
            width: 100%;
            height: 40px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background: transparent;
        }

        .font-settings,
        .radius-settings {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }

        .font-item,
        .radius-item {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .font-item label,
        .radius-item label {
            width: 120px;
            font-size: 13px;
            color: rgba(255, 255, 255, 0.7);
            flex-shrink: 0;
        }

        .font-item select {
            flex: 1;
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 14px;
            cursor: pointer;
        }

        .font-item select:focus {
            outline: none;
            border-color: rgba(0, 122, 255, 0.5);
        }

        .font-item input[type="range"],
        .radius-item input[type="range"] {
            flex: 1;
            height: 6px;
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            outline: none;
        }

        .font-item input[type="range"]::-webkit-slider-thumb,
        .radius-item input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: var(--primary-blue);
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .font-item input[type="range"]::-webkit-slider-thumb:hover,
        .radius-item input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .range-value {
            width: 50px;
            text-align: right;
            font-size: 13px;
            color: rgba(255, 255, 255, 0.6);
        }

        .theme-actions {
            display: flex;
            gap: 12px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* 照片管理样式 */
        .photo-category-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .photo-cat-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 8px 16px;
            color: rgba(255, 255, 255, 0.6);
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .photo-cat-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }

        .photo-cat-btn.active {
            background: linear-gradient(135deg, var(--primary-blue), #00D4FF);
            border-color: transparent;
            color: white;
        }

        .photo-upload-area {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(0, 122, 255, 0.03);
            border: 1px solid rgba(0, 122, 255, 0.15);
            border-radius: 12px;
        }

        .photo-list-section h4 {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 15px;
        }

        .admin-photo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 12px;
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 12px;
        }

        .admin-photo-item {
            position: relative;
            aspect-ratio: 1;
            border-radius: 8px;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.05);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .admin-photo-item:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 20px rgba(0, 122, 255, 0.3);
        }

        .admin-photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .admin-photo-delete {
            position: absolute;
            top: 4px;
            right: 4px;
            width: 24px;
            height: 24px;
            background: rgba(255, 55, 95, 0.9);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 14px;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .admin-photo-item:hover .admin-photo-delete {
            opacity: 1;
        }

        .admin-photo-delete:hover {
            background: rgba(255, 55, 95, 1);
            transform: scale(1.1);
        }

        .admin-photo-empty {
            grid-column: 1 / -1;
            text-align: center;
            padding: 40px;
            color: rgba(255, 255, 255, 0.4);
            font-size: 14px;
        }
    </style>
</head>
<body>
    <!-- 页面密码保护遮罩层 -->
    <div class="page-lock-overlay" id="page-lock-overlay">
        <div class="page-lock-content">
            <div class="page-lock-icon">🔒</div>
            <div class="page-lock-title">访问受限</div>
            <div class="page-lock-subtitle">请输入访问密码以继续</div>
            <input type="password" class="page-lock-input" id="page-lock-password" placeholder="输入密码" maxlength="20">
            <button class="page-lock-btn" id="page-lock-submit">解锁</button>
            <div class="page-lock-error" id="page-lock-error">密码错误，请重试</div>
        </div>
    </div>

    <script>
        // 立即检查密码保护（在页面渲染前）
        (function() {
            const isLocked = localStorage.getItem('pagePasswordEnabled') === 'true';
            const savedPassword = localStorage.getItem('pagePassword');
            const isUnlocked = sessionStorage.getItem('pageUnlocked') === 'true';
            
            if (isLocked && savedPassword && !isUnlocked) {
                document.documentElement.style.overflow = 'hidden';
                // 等待DOM加载完成后显示遮罩
                document.addEventListener('DOMContentLoaded', function() {
                    const overlay = document.getElementById('page-lock-overlay');
                    if (overlay) {
                        overlay.classList.add('show');
                        document.body.style.overflow = 'hidden';
                    }
                });
            }
        })();
    </script>

    <div class="bg-gradient"></div>
    
    <!-- Floating particles -->
    <div class="particles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>
    
    <!-- Glow orbs -->
    <div class="glow-orb glow-orb-1"></div>
    <div class="glow-orb glow-orb-2"></div>

    <!-- 顶部状态栏 -->
    <div class="top-status-bar">
        <div class="top-status-item">
            <div class="top-status-icon"><i class="fas fa-calendar"></i></div>
            <div class="top-status-content">
                <span class="top-status-label">日期</span>
                <span class="top-status-value" id="current-date">--/--</span>
            </div>
        </div>
        <div class="top-status-item">
            <div class="top-status-icon"><i class="fas fa-clock"></i></div>
            <div class="top-status-content">
                <span class="top-status-label">时间</span>
                <span class="top-status-value" id="current-time">--:--</span>
            </div>
        </div>
        <div class="top-status-item top-status-weather" id="weather-item" title="点击选择城市">
            <div class="top-status-icon"><i class="fas fa-map-marker-alt"></i></div>
            <div class="top-status-content">
                <span class="top-status-label" id="weather-city">天气</span>
                <span class="top-status-value" id="weather-info">--°C</span>
            </div>
            <div class="weather-item-wrapper">
                <div class="city-selector" id="city-selector">
                    <div class="city-search-box">
                        <input type="text" class="city-search-input" id="city-search-input" placeholder="搜索城市..." onkeypress="if(event.key==='Enter')searchCity()">
                        <button class="city-search-btn" onclick="searchCity()">搜索</button>
                    </div>
                    <div class="city-list-title">常见城市</div>
                    <div class="city-list">
                        <span class="city-item" onclick="selectCity('北京')">北京</span>
                        <span class="city-item" onclick="selectCity('上海')">上海</span>
                        <span class="city-item" onclick="selectCity('深圳')">深圳</span>
                        <span class="city-item" onclick="selectCity('广州')">广州</span>
                        <span class="city-item" onclick="selectCity('东莞')">东莞</span>
                        <span class="city-item" onclick="selectCity('金昌')">金昌</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 音乐播放列表弹窗 -->
    <div class="music-playlist-modal" id="music-playlist-modal">
        <div class="music-playlist-panel">
            <div class="music-playlist-header">
                <h3><i class="fas fa-music"></i> 播放列表</h3>
                <button class="modal-close" onclick="closeMusicPlaylist()">×</button>
            </div>
            <div class="music-playlist-content" id="music-playlist-content">
                <!-- 播放列表内容 -->
            </div>
            <div class="music-playlist-footer">
                <div class="music-player-controls">
                    <button class="music-control-btn" onclick="playPreviousMusic()" title="上一首">
                        <i class="fas fa-step-backward"></i>
                    </button>
                    <button class="music-control-btn play-pause" id="playlist-play-btn" onclick="togglePlaylistPlay()" title="播放/暂停">
                        <i class="fas fa-play"></i>
                    </button>
                    <button class="music-control-btn" onclick="playNextMusic()" title="下一首">
                        <i class="fas fa-step-forward"></i>
                    </button>
                </div>
                <div class="music-volume-control">
                    <i class="fas fa-volume-down music-volume-icon"></i>
                    <input type="range" class="music-volume-slider" id="music-volume-slider" min="0" max="1" step="0.1" value="0.5">
                    <i class="fas fa-volume-up music-volume-icon"></i>
                </div>
            </div>
        </div>
    </div>

    <div class="music-control" id="music-control" data-state="off" title="音乐开关">
        <i class="fas fa-music"></i>
    </div>

    <!-- 右侧状态栏 -->
    <div class="right-status-bar">
        <!-- 登录按钮 -->
        <button class="right-status-item" id="login-btn">
            <div class="right-status-icon"><i class="fas fa-user"></i></div>
            <span id="login-text">登录</span>
        </button>
        <!-- 管理按钮 - 登录后显示 -->
        <button class="right-status-item admin-only" id="admin-btn">
            <div class="right-status-icon"><i class="fas fa-cog"></i></div>
            <span>管理</span>
        </button>
    </div>

    <!-- 登录弹窗 -->
    <div class="modal-overlay" id="login-modal">
        <div class="login-modal">
            <button class="modal-close" id="close-login">×</button>
            <h2>🔐 用户登录</h2>
            <form class="login-form" id="login-form">
                <input type="text" id="username" placeholder="用户名" required>
                <input type="password" id="password" placeholder="密码" required>
                <button type="submit">登录</button>
            </form>
            <div class="login-error" id="login-error">用户名或密码错误</div>
            <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1); font-size: 12px; color: rgba(255,255,255,0.4); text-align: center;">
                <div>默认账号：</div>
                <div style="margin-top: 8px;">管理员: admin / admin123</div>
                <div>普通用户: user / user123</div>
            </div>
        </div>
    </div>

    <!-- 管理面板 -->
    <div class="modal-overlay" id="admin-modal">
        <div class="admin-panel">
            <div class="admin-header">
                <h2>⚙️ 管理面板</h2>
                <button class="modal-close" id="close-admin">×</button>
            </div>
            <div class="admin-tabs">
                <button class="admin-tab active" data-tab="apps">应用导航</button>
                <button class="admin-tab" data-tab="favorites">底部导航</button>
                <button class="admin-tab" data-tab="music">音乐列表</button>
                <button class="admin-tab" data-tab="quotes">每日一言</button>
                <button class="admin-tab" data-tab="settings">站点设置</button>
                <button class="admin-tab" data-tab="photos">照片管理</button>
                <button class="admin-tab" data-tab="theme">主题样式</button>
                <button class="admin-tab" data-tab="servers">主机管理</button>
<button class="admin-tab" data-tab="account">账户管理</button>
            </div>
            <div class="admin-content">
                <!-- 应用导航管理 -->
                <div class="admin-section active" id="tab-apps">
                    <h3>📱 应用导航配置</h3>
                    <div id="apps-editor"></div>
                    <button class="add-btn" id="add-app">+ 添加应用</button>
                </div>
                
                <!-- 底部导航管理 -->
                <div class="admin-section" id="tab-favorites">
                    <h3>⭐ 底部导航配置</h3>
                    <div id="favorites-editor"></div>
                    <button class="add-btn" id="add-favorite">+ 添加网址</button>
                </div>
                
                <!-- 音乐列表管理 -->
                <div class="admin-section" id="tab-music">
                    <h3>🎵 音乐管理</h3>
                    <div id="music-list-editor"></div>
                    
                    <!-- 上传区域 -->
                    <div class="music-upload-compact" id="music-upload-area">
                        <input type="file" id="music-file-input" accept="audio/*" multiple style="display: none;">
                        
                        <!-- 选择按钮行 -->
                        <div class="upload-row">
                            <button type="button" class="select-file-btn" onclick="document.getElementById('music-file-input').click()">
                                📁 选择音乐文件（可多选）
                            </button>
                            <span class="selected-files" id="selected-files-text">未选择文件（最多20个）</span>
                            <button type="button" class="upload-confirm-btn" id="upload-confirm-btn" disabled>
                                ⬆️ 确认添加
                            </button>
                            <button type="button" class="clear-files-btn" id="clear-files-btn" style="display: none;">
                                清空
                            </button>
                        </div>
                        <div class="upload-types-compact">支持格式: MP3, WAV, OGG, M4A, FLAC</div>
                        
                        <!-- 待上传文件列表 -->
                        <div class="pending-files-list" id="pending-files-list" style="display: none;">
                            <div class="pending-header">📋 待添加文件列表：</div>
                            <div id="pending-files-container"></div>
                        </div>
                        
                        <!-- 进度条 -->
                        <div class="upload-progress-compact" id="upload-progress" style="display: none;">
                            <div class="progress-bar-compact">
                                <div class="progress-fill" id="progress-fill"></div>
                            </div>
                            <div class="progress-text" id="progress-text"></div>
                        </div>
                    </div>
                </div>
                
                <!-- 每日一言管理 -->
                <div class="admin-section" id="tab-quotes">
                    <h3>💬 每日一言管理</h3>
                    <div class="quotes-actions">
                        <button class="action-btn" id="load-quotes-file">📂 从文件加载</button>
                        <button class="action-btn" id="add-quote-line">➕ 添加名言</button>
                    </div>
                    <div class="quote-list-editor" id="quote-list-editor"></div>
                    <div class="quote-hint-text">从文本文件加载（格式：句子 + 空格 + 作者），点击下方删除按钮移除，添加按钮新增</div>
                </div>
                
                <!-- 站点设置 -->
                <div class="admin-section" id="tab-settings">
                    <h3>⚙️ 站点设置</h3>
                    <div class="settings-section">
                        <div class="setting-item">
                            <label>站点名称</label>
                            <input type="text" id="site-name-input" placeholder="Alix Go" value="Alix Go">
                            <button class="action-btn" id="save-site-name">保存名称</button>
                        </div>
                        <div class="setting-item">
                            <label>页面密码保护</label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="page-password-toggle">
                                <span class="toggle-slider"></span>
                            </div>
                            <div class="setting-hint">开启后进入网站需要输入密码</div>
                        </div>
                        <div class="setting-item" id="page-password-input-container" style="display: none;">
                            <label>页面访问密码</label>
                            <input type="password" id="page-password-input" placeholder="设置访问密码">
                            <button class="action-btn" id="save-page-password">保存设置</button>
                            <div class="setting-hint">此密码用于首页访问验证</div>
                        </div>
                        <div class="setting-item">
                            <label>配置导出/导入</label>
                            <div class="settings-actions">
                                <button class="action-btn" id="export-config">📤 导出配置</button>
                                <button class="action-btn" id="import-config">📥 导入配置</button>
                            </div>
                            <input type="file" id="import-file-input" accept=".json" style="display: none;">
                        </div>
                    </div>
                </div>
                
                <!-- 照片管理 -->
                <div class="admin-section" id="tab-photos">
                    <h3>📷 照片管理</h3>
                    
                    <!-- 分类选择 -->
                    <div class="photo-category-tabs">
                        <button class="photo-cat-btn active" data-cat="landscape">风景</button>
                        <button class="photo-cat-btn" data-cat="portrait">人像</button>
                        <button class="photo-cat-btn" data-cat="humanity">人文</button>
                        <button class="photo-cat-btn" data-cat="other">其他</button>
                    </div>
                    
                    <!-- 上传区域 -->
                    <div class="photo-upload-area" id="photo-upload-area">
                        <input type="file" id="photo-file-input" accept="image/*" multiple style="display: none;">
                        <div class="upload-row">
                            <button type="button" class="select-file-btn" onclick="document.getElementById('photo-file-input').click()">
                                📁 选择照片（可多选）
                            </button>
                            <span class="selected-files" id="photo-selected-text">未选择文件</span>
                            <button type="button" class="upload-confirm-btn" id="photo-upload-btn" disabled>
                                ⬆️ 确认上传
                            </button>
                            <button type="button" class="clear-files-btn" id="photo-clear-btn" style="display: none;">
                                清空
                            </button>
                        </div>
                        <div class="upload-types-compact">支持格式: JPG, PNG, GIF, WebP</div>
                        
                        <!-- 待上传文件列表 -->
                        <div class="pending-files-list" id="photo-pending-list" style="display: none;">
                            <div class="pending-header">📋 待上传文件列表：</div>
                            <div id="photo-pending-container"></div>
                        </div>
                    </div>
                    
                    <!-- 照片列表 -->
                    <div class="photo-list-section">
                        <h4>当前分类照片</h4>
                        <div class="admin-photo-grid" id="admin-photo-grid"></div>
                    </div>
                </div>
                
                <!-- 主题样式 -->
                <div class="admin-section" id="tab-theme">
                    <h3>🎨 主题样式</h3>
                    
                    <!-- 预设主题 -->
                    <div class="theme-presets">
                        <h4>预设主题</h4>
                        <div class="preset-grid">
                            <div class="preset-item" data-preset="default">
                                <div class="preset-preview default-theme"></div>
                                <span>默认主题</span>
                            </div>
                            <div class="preset-item" data-preset="dark">
                                <div class="preset-preview dark-theme"></div>
                                <span>深邃黑</span>
                            </div>
                            <div class="preset-item" data-preset="ocean">
                                <div class="preset-preview ocean-theme"></div>
                                <span>海洋蓝</span>
                            </div>
                            <div class="preset-item" data-preset="forest">
                                <div class="preset-preview forest-theme"></div>
                                <span>森林绿</span>
                            </div>
                            <div class="preset-item" data-preset="sunset">
                                <div class="preset-preview sunset-theme"></div>
                                <span>日落橙</span>
                            </div>
                            <div class="preset-item" data-preset="purple">
                                <div class="preset-preview purple-theme"></div>
                                <span>梦幻紫</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 自定义颜色 -->
                    <div class="theme-custom">
                        <h4>自定义颜色</h4>
                        <div class="color-settings">
                            <div class="color-item">
                                <label>主色调</label>
                                <input type="color" id="theme-primary" value="#007AFF">
                            </div>
                            <div class="color-item">
                                <label>背景色</label>
                                <input type="color" id="theme-bg" value="#000000">
                            </div>
                            <div class="color-item">
                                <label>文字颜色</label>
                                <input type="color" id="theme-text" value="#FFFFFF">
                            </div>
                            <div class="color-item">
                                <label>次要文字</label>
                                <input type="color" id="theme-text-secondary" value="#999999">
                            </div>
                            <div class="color-item">
                                <label>边框颜色</label>
                                <input type="color" id="theme-border" value="rgba(255, 255, 255, 0.1)">
                            </div>
                            <div class="color-item">
                                <label>卡片背景</label>
                                <input type="color" id="theme-card-bg" value="rgba(255, 255, 255, 0.08)">
                            </div>
                        </div>
                    </div>
                    
                    <!-- 字体设置 -->
                    <div class="theme-fonts">
                        <h4>字体设置</h4>
                        <div class="font-settings">
                            <div class="font-item">
                                <label>主字体</label>
                                <select id="theme-font-primary">
                                    <option value="'Inter', sans-serif">Inter (默认)</option>
                                    <option value="'Noto Sans SC', sans-serif">Noto Sans SC</option>
                                    <option value="'Noto Serif SC', serif">Noto Serif SC</option>
                                    <option value="'Ma Shan Zheng', cursive">马善政毛笔</option>
                                    <option value="'ZCOOL XiaoWei', serif">站酷小薇</option>
                                    <option value="'ZCOOL KuaiLe', cursive">站酷快乐体</option>
                                    <option value="system-ui, sans-serif">系统字体</option>
                                </select>
                            </div>
                            <div class="font-item">
                                <label>标题字体大小</label>
                                <input type="range" id="theme-title-size" min="14" max="32" value="20">
                                <span class="range-value">20px</span>
                            </div>
                            <div class="font-item">
                                <label>正文字体大小</label>
                                <input type="range" id="theme-body-size" min="12" max="20" value="14">
                                <span class="range-value">14px</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 圆角设置 -->
                    <div class="theme-radius">
                        <h4>圆角设置</h4>
                        <div class="radius-settings">
                            <div class="radius-item">
                                <label>卡片圆角</label>
                                <input type="range" id="theme-card-radius" min="0" max="30" value="16">
                                <span class="range-value">16px</span>
                            </div>
                            <div class="radius-item">
                                <label>按钮圆角</label>
                                <input type="range" id="theme-btn-radius" min="0" max="30" value="25">
                                <span class="range-value">25px</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 操作按钮 -->
                    <div class="theme-actions">
                        <button class="action-btn" id="apply-theme">应用主题</button>
                        <button class="action-btn" id="save-theme">保存为预设</button>
                        <button class="action-btn" id="reset-theme">恢复默认</button>
                    </div>
                </div>
                
                <!-- 主机管理 -->
                <div class="admin-section" id="tab-servers">
                    <h3>🖥️ 主机管理</h3>
                    <div class="server-list-editor" id="servers-editor"></div>
                    <button class="add-btn" id="add-server">+ 添加主机</button>
                    <div class="quote-hint-text">配置需要监控的服务器，系统将自动检测在线状态</div>
                </div>
                
                <!-- 账户管理 -->
                <div class="admin-section" id="tab-account">
                    <h3>👤 账户管理</h3>
                    <div class="account-form">
                        <div class="form-group">
                            <label>当前用户</label>
                            <div class="current-user-display" id="current-user-display">未登录</div>
                        </div>
                        <div class="form-group">
                            <label>新用户名</label>
                            <input type="text" id="new-username" placeholder="输入新用户名">
                        </div>
                        <div class="form-group">
                            <label>新密码</label>
                            <input type="password" id="new-password" placeholder="输入新密码">
                        </div>
                        <div class="form-group">
                            <label>确认密码</label>
                            <input type="password" id="confirm-password" placeholder="再次输入新密码">
                        </div>
                        <button class="action-btn" id="update-account">更新账户信息</button>
                        <div class="account-hint">密码将采用 SHA-256 加密存储</div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- 图标库弹窗 -->
    <div class="icon-library-modal" id="icon-library-modal">
        <div class="icon-library-panel">
            <div class="icon-library-header">
                <h3>🎨 选择图标</h3>
                <button class="modal-close" onclick="closeIconLibrary()">×</button>
            </div>
            <div class="icon-search">
                <input type="text" id="icon-search-input" placeholder="搜索图标..." oninput="filterIcons(this.value)">
            </div>
            <div class="icon-library-content" id="icon-library-content">
                <!-- 图标列表 -->
            </div>
        </div>
    </div>

    <!-- 主内容 -->
    <main class="main-content">
        <!-- 第一屏：每日一言 -->
        <section class="section-full">
            <!-- 名言轮播 -->
            <div class="quote-section">
                <div class="site-name">Alix Go</div>
                <div class="quote-container">
                    <div class="quote-corner top-left"></div>
                    <div class="quote-corner top-right"></div>
                    <div class="quote-corner bottom-left"></div>
                    <div class="quote-corner bottom-right"></div>
                    <div class="quote-icon">❝</div>
                    <div class="quote-text" id="quote-text">生活中不缺少美，只是缺少发现美的眼睛。</div>
                    <div class="quote-author" id="quote-author">罗丹</div>
                    <div class="quote-hint">点击切换名言</div>
                </div>
            </div>
            <!-- 滚动提示 -->
            <div class="scroll-hint">
                <span>向下滚动</span>
                <div class="scroll-arrow">↓</div>
            </div>
        </section>

        <!-- 第二屏：摄影作品 -->
        <section id="gallery" class="gallery-section section-full">
            <div class="section-header">
                <h2 class="section-title">摄影作品</h2>
                <div class="gallery-tabs">
                    <button class="gallery-tab active" data-category="landscape">风景</button>
                    <button class="gallery-tab" data-category="portrait">人像</button>
                    <button class="gallery-tab" data-category="humanity">人文</button>
                    <button class="gallery-tab" data-category="other">其他</button>
                </div>
            </div>
            <div class="gallery-grid" id="gallery-grid"></div>
            <div class="gallery-more">
                <a href="#" class="gallery-more-link">查看更多 →</a>
            </div>
        </section>

        <!-- 第三屏：应用导航 -->
        <section id="apps" class="apps-section section-full">
            <h2 class="section-title">应用导航</h2>
            <div class="apps-grid"></div>
        </section>

        <!-- 第四屏：主机导航 -->
        <section id="servers" class="servers-section section-full">
            <div class="section-header">
                <h2 class="section-title">🖥️ 主机导航</h2>
                <div class="servers-last-check" id="servers-last-check">上次检查: --</div>
            </div>
            <div class="servers-grid" id="servers-grid"></div>
        </section>
    </main>

    <!-- 底部浮动常用网址 -->
    <div class="bottom-favorites"></div>

    <script>
        // ==================== 用户认证系统 ====================
        const AUTH_CONFIG = {
            users: [
                { username: 'admin', password: 'admin123', role: 'admin' },
                { username: 'user', password: 'user123', role: 'user' }
            ]
        };

        let currentUser = null;
        let currentRole = null;

        // 检查登录状态
        function checkLoginStatus() {
            const savedUser = localStorage.getItem('currentUser');
            const savedRole = localStorage.getItem('currentRole');
            const expiry = localStorage.getItem('loginExpiry');
            
            if (savedUser && savedRole && expiry && Date.now() < parseInt(expiry)) {
                currentUser = savedUser;
                currentRole = savedRole;
                updateLoginUI();
                return true;
            }
            
            // 清理过期数据
            localStorage.removeItem('currentUser');
            localStorage.removeItem('currentRole');
            localStorage.removeItem('loginExpiry');
            return false;
        }

        // 登录（支持明文和 SHA-256 加密密码）
        async function login(username, password) {
            const user = AUTH_CONFIG.users.find(u => u.username === username);
            
            if (!user) return false;
            
            let isValid = false;
            
            // 检查密码是否是 SHA-256 格式（64位十六进制字符串）
            if (user.password.length === 64 && /^[a-f0-9]+$/.test(user.password)) {
                // 加密密码，需要 SHA-256 比对
                const hashedPassword = await sha256(password);
                isValid = hashedPassword === user.password;
            } else {
                // 明文密码，直接比对
                isValid = user.password === password;
            }
            
            if (isValid) {
                currentUser = user.username;
                currentRole = user.role;
                
                // 保存登录状态（7天有效期）
                localStorage.setItem('currentUser', currentUser);
                localStorage.setItem('currentRole', currentRole);
                localStorage.setItem('loginExpiry', Date.now() + 7 * 24 * 60 * 60 * 1000);
                
                updateLoginUI();
                return true;
            }
            
            return false;
        }

        // 登出
        function logout() {
            currentUser = null;
            currentRole = null;
            localStorage.removeItem('currentUser');
            localStorage.removeItem('currentRole');
            localStorage.removeItem('loginExpiry');
            updateLoginUI();
        }

        // 更新登录UI
        function updateLoginUI() {
            const loginBtn = document.getElementById('login-btn');
            const loginText = document.getElementById('login-text');
            const adminBtn = document.getElementById('admin-btn');
            
            if (currentUser) {
                loginBtn.classList.add('logged-in');
                loginText.textContent = currentUser;
                
                if (currentRole === 'admin') {
                    adminBtn.classList.add('show');
                } else {
                    adminBtn.classList.remove('show');
                }
            } else {
                loginBtn.classList.remove('logged-in');
                loginText.textContent = '登录';
                adminBtn.classList.remove('show');
            }
        }

        // ==================== 配置管理系统 ====================
        // 默认配置
        const DEFAULT_CONFIG = {
            apps: [
                { icon: '📊', name: 'Grafana', desc: '监控面板', url: 'http://localhost:3000' },
                { icon: '🐳', name: 'Portainer', desc: '容器管理', url: 'http://localhost:9000' },
                { icon: '🎬', name: 'Jellyfin', desc: '媒体中心', url: 'http://localhost:8096' },
                { icon: '☁️', name: 'AList', desc: '网盘管理', url: 'http://localhost:5244' },
                { icon: '🤖', name: '青龙', desc: '定时任务', url: 'http://localhost:5700' },
                { icon: '🎵', name: 'Navidrome', desc: '音乐服务', url: 'http://localhost:4533' },
                { icon: '🔄', name: 'Syncthing', desc: '文件同步', url: 'http://localhost:8384' }
            ],
            favorites: [
                { icon: '🐙', name: 'GitHub', url: 'https://github.com' },
                { icon: '💻', name: 'Stack', url: 'https://stackoverflow.com' },
                { icon: '🗣️', name: 'V2EX', url: 'https://www.v2ex.com' },
                { icon: '❓', name: '知乎', url: 'https://www.zhihu.com' },
                { icon: '📱', name: '少数派', url: 'https://sspai.com' },
                { icon: '📺', name: 'B站', url: 'https://www.bilibili.com' },
                { icon: '🔍', name: 'Google', url: 'https://www.google.com' },
                { icon: '▶️', name: 'YouTube', url: 'https://www.youtube.com' }
            ],
            music: [
                'music/Monica - 张国荣.mp3',
                'music/That Girl - Olly Murs.mp3',
                'music/夜曲 - 周杰伦.mp3',
                'music/最熟悉的陌生人 - 萧亚轩.mp3',
                'music/梦中的婚礼 - Richard Clayderman.mp3',
                'music/花房姑娘 - 崔健.mp3'
            ],
            quotes: [
                { text: "生活中不缺少美，只是缺少发现美的眼睛。", author: "罗丹" },
                { text: "Stay hungry, stay foolish.", author: "Steve Jobs" },
                { text: "未经审视的人生不值得过。", author: "苏格拉底" },
                { text: "千里之行，始于足下。", author: "老子" },
                { text: "知之者不如好之者，好之者不如乐之者。", author: "孔子" },
                { text: "简单是终极的复杂。", author: "达芬奇" },
                { text: "代码是写给人看的，只是顺便能让机器运行。", author: "Donald Knuth" },
                { text: "学而时习之，不亦说乎？", author: "孔子" },
                { text: "To be or not to be, that is the question.", author: "莎士比亚" },
                { text: "己所不欲，勿施于人。", author: "孔子" },
                { text: "I think, therefore I am.", author: "笛卡尔" },
                { text: "天行健，君子以自强不息。", author: "《周易》" },
                { text: "路漫漫其修远兮，吾将上下而求索。", author: "屈原" },
                { text: "不积跬步，无以至千里。", author: "荀子" },
                { text: "纸上得来终觉浅，绝知此事要躬行。", author: "陆游" },
                { text: "宝剑锋从磨砺出，梅花香自苦寒来。", author: "古诗" },
                { text: "海纳百川，有容乃大。", author: "林则徐" },
                { text: "业精于勤，荒于嬉。", author: "韩愈" },
                { text: "非淡泊无以明志，非宁静无以致远。", author: "诸葛亮" },
                { text: "工欲善其事，必先利其器。", author: "孔子" },
                { text: "三人行，必有我师焉。", author: "孔子" },
                { text: "学而不思则罔，思而不学则殆。", author: "孔子" },
                { text: "温故而知新，可以为师矣。", author: "孔子" },
                { text: "逝者如斯夫，不舍昼夜。", author: "孔子" },
                { text: "君子坦荡荡，小人长戚戚。", author: "孔子" },
                { text: "吾生也有涯，而知也无涯。", author: "庄子" },
                { text: "穷则独善其身，达则兼济天下。", author: "孟子" },
                { text: "生于忧患，死于安乐。", author: "孟子" },
                { text: "得道者多助，失道者寡助。", author: "孟子" },
                { text: "天时不如地利，地利不如人和。", author: "孟子" },
                { text: "富贵不能淫，贫贱不能移。", author: "孟子" },
                { text: "老吾老以及人之老。", author: "孟子" },
                { text: "居安思危，思则有备。", author: "《左传》" },
                { text: "人谁无过？过而能改，善莫大焉。", author: "《左传》" },
                { text: "多行不义必自毙。", author: "《左传》" },
                { text: "皮之不存，毛将焉附？", author: "《左传》" },
                { text: "辅车相依，唇亡齿寒。", author: "《左传》" },
                { text: "一鼓作气，再而衰，三而竭。", author: "《左传》" },
                { text: "流水不腐，户枢不蠹。", author: "《吕氏春秋》" },
                { text: "察己则可以知人。", author: "《吕氏春秋》" },
                { text: "胜人者有力，自胜者强。", author: "老子" },
                { text: "大直若屈，大巧若拙。", author: "老子" },
                { text: "祸兮福之所倚，福兮祸之所伏。", author: "老子" },
                { text: "合抱之木，生于毫末。", author: "老子" },
                { text: "上善若水，水善利万物而不争。", author: "老子" },
                { text: "知人者智，自知者明。", author: "老子" },
                { text: "天下难事，必作于易。", author: "老子" },
                { text: "慎终如始，则无败事。", author: "老子" },
                { text: "相濡以沫，不如相忘于江湖。", author: "庄子" },
                { text: "夏虫不可语冰。", author: "庄子" },
                { text: "人生天地之间，若白驹过隙。", author: "庄子" },
                { text: "君子之交淡若水。", author: "庄子" },
                { text: "天地与我并生。", author: "庄子" },
                { text: "至人无己，神人无功。", author: "庄子" },
                { text: "临渊羡鱼，不如退而结网。", author: "《汉书》" },
                { text: "绳锯木断，水滴石穿。", author: "《汉书》" },
                { text: "水至清则无鱼。", author: "《汉书》" },
                { text: "前车之覆，后车之鉴。", author: "《汉书》" },
                { text: "百闻不如一见。", author: "《汉书》" },
                { text: "失之毫厘，谬以千里。", author: "《汉书》" },
                { text: "不入虎穴，焉得虎子。", author: "《汉书》" },
                { text: "天下熙熙，皆为利来。", author: "《史记》" },
                { text: "桃李不言，下自成蹊。", author: "《史记》" },
                { text: "智者千虑，必有一失。", author: "《史记》" },
                { text: "项庄舞剑，意在沛公。", author: "《史记》" },
                { text: "人为刀俎，我为鱼肉。", author: "《史记》" },
                { text: "运筹帷幄之中，决胜千里之外。", author: "《史记》" },
                { text: "忠言逆耳利于行。", author: "《史记》" },
                { text: "山重水复疑无路，柳暗花明又一村。", author: "陆游" },
                { text: "问渠那得清如许？为有源头活水来。", author: "朱熹" },
                { text: "少年易老学难成，一寸光阴不可轻。", author: "朱熹" },
                { text: "读书破万卷，下笔如有神。", author: "杜甫" },
                { text: "会当凌绝顶，一览众山小。", author: "杜甫" },
                { text: "星垂平野阔，月涌大江流。", author: "杜甫" },
                { text: "无边落木萧萧下，不尽长江滚滚来。", author: "杜甫" },
                { text: "白日放歌须纵酒，青春作伴好还乡。", author: "杜甫" },
                { text: "两个黄鹂鸣翠柳，一行白鹭上青天。", author: "杜甫" },
                { text: "春江潮水连海平，海上明月共潮生。", author: "张若虚" },
                { text: "人生代代无穷已，江月年年只相似。", author: "张若虚" },
                { text: "海内存知己，天涯若比邻。", author: "王勃" },
                { text: "落霞与孤鹜齐飞，秋水共长天一色。", author: "王勃" },
                { text: "欲穷千里目，更上一层楼。", author: "王之涣" },
                { text: "羌笛何须怨杨柳，春风不度玉门关。", author: "王之涣" },
                { text: "采菊东篱下，悠然见南山。", author: "陶渊明" },
                { text: "晨兴理荒秽，带月荷锄归。", author: "陶渊明" },
                { text: "盛年不重来，一日难再晨。", author: "陶渊明" },
                { text: "大江东去，浪淘尽，千古风流人物。", author: "苏轼" },
                { text: "但愿人长久，千里共婵娟。", author: "苏轼" },
                { text: "不识庐山真面目，只缘身在此山中。", author: "苏轼" },
                { text: "竹外桃花三两枝，春江水暖鸭先知。", author: "苏轼" },
                { text: "横看成岭侧成峰，远近高低各不同。", author: "苏轼" },
                { text: "The only way to do great work is to love what you do.", author: "Steve Jobs" },
                { text: "Innovation distinguishes between a leader and a follower.", author: "Steve Jobs" },
                { text: "Stay foolish, stay hungry.", author: "Steve Jobs" },
                { text: "Life is what happens when you're busy making other plans.", author: "John Lennon" },
                { text: "The future belongs to those who believe in the beauty of their dreams.", author: "Eleanor Roosevelt" },
                { text: "It is during our darkest moments that we must focus to see the light.", author: "Aristotle" }
            ]
        };

        // 加载配置（从localStorage或默认，并合并缺失字段）
        function loadConfig() {
            const saved = localStorage.getItem('siteConfig');
            if (saved) {
                const parsed = JSON.parse(saved);
                // 合并默认配置，确保所有字段都存在
                return {
                    apps: parsed.apps || DEFAULT_CONFIG.apps,
                    favorites: parsed.favorites || DEFAULT_CONFIG.favorites,
                    music: parsed.music || DEFAULT_CONFIG.music,
                    quotes: parsed.quotes || DEFAULT_CONFIG.quotes
                };
            }
            return JSON.parse(JSON.stringify(DEFAULT_CONFIG));
        }

        // 加载照片数据
        function loadGalleryData() {
            const saved = localStorage.getItem('galleryData');
            if (saved) {
                return JSON.parse(saved);
            }
            // 返回默认照片数据
            return {
                landscape: [
                    { src: 'images/landscape/1.jpg', title: '山水', desc: '清晨的山水' },
                    { src: 'images/landscape/2.jpg', title: '湖泊', desc: '宁静的湖面' },
                    { src: 'images/landscape/3.jpg', title: '森林', desc: '林间小道' }
                ],
                portrait: [
                    { src: 'images/portrait/1.jpg', title: '人像1', desc: '人像摄影' },
                    { src: 'images/portrait/2.jpg', title: '人像2', desc: '人像摄影' }
                ],
                humanity: [
                    { src: 'images/humanity/1.jpg', title: '人文1', desc: '人文纪实' },
                    { src: 'images/humanity/2.jpg', title: '人文2', desc: '人文纪实' }
                ],
                other: [
                    { src: 'images/other/1.jpg', title: '其他1', desc: '其他照片' }
                ]
            };
        }

        // 保存配置
        function saveConfig(config) {
            localStorage.setItem('siteConfig', JSON.stringify(config));
        }

        // 当前配置
        let config = loadConfig();
        
        // 照片数据（全局变量，支持持久化）
        window.galleryData = loadGalleryData();

        // 重置配置
        function resetConfig() {
            config = JSON.parse(JSON.stringify(DEFAULT_CONFIG));
            saveConfig(config);
            location.reload();
        }

        // 渲染应用导航
        function renderApps() {
            const appsGrid = document.querySelector('.apps-grid');
            appsGrid.innerHTML = config.apps.map(app => {
                let iconContent;
                if (app.iconUrl) {
                    iconContent = `<img src="${app.iconUrl}" style="width: 100%; height: 100%; object-fit: cover;" onerror="this.parentElement.innerHTML='<i class=\\'fas fa-rocket\\'></i>'">`;
                } else if (app.icon && app.icon.startsWith('fa-')) {
                    iconContent = `<i class="fas ${app.icon}"></i>`;
                } else {
                    iconContent = app.icon || '<i class="fas fa-rocket"></i>';
                }
                return `
                    <a href="${app.url}" class="app-item" target="_blank">
                        <div class="app-icon">${iconContent}</div>
                        <div class="app-name">${app.name}</div>
                    </a>
                `;
            }).join('');
        }

        // 渲染底部收藏
        function renderFavorites() {
            const bottomFavorites = document.querySelector('.bottom-favorites');
            bottomFavorites.innerHTML = config.favorites.map(fav => {
                let iconContent;
                if (fav.iconUrl) {
                    iconContent = `<img src="${fav.iconUrl}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;" onerror="this.parentElement.innerHTML='<i class=\\'fas fa-link\\'></i>'">`;
                } else if (fav.icon && fav.icon.startsWith('fa-')) {
                    iconContent = `<i class="fas ${fav.icon}"></i>`;
                } else {
                    iconContent = fav.icon || '<i class="fas fa-link"></i>';
                }
                return `
                    <a href="${fav.url}" class="bottom-favorite-item" target="_blank" data-name="${fav.name}">
                        <div class="bottom-favorite-icon">${iconContent}</div>
                        <span>${fav.name}</span>
                    </a>
                `;
            }).join('');
        }

        // ==================== 登录和管理功能 ====================
        
        // 检查登录状态
        checkLoginStatus();
        
        // 登录按钮事件
        document.getElementById('login-btn').addEventListener('click', () => {
            if (currentUser) {
                // 已登录，点击登出
                if (confirm(`确定要登出 ${currentUser} 吗？`)) {
                    logout();
                }
            } else {
                // 未登录，显示登录弹窗
                document.getElementById('login-modal').classList.add('show');
                document.getElementById('username').focus();
            }
        });
        
        // 关闭登录弹窗
        document.getElementById('close-login').addEventListener('click', () => {
            document.getElementById('login-modal').classList.remove('show');
            document.getElementById('login-error').classList.remove('show');
        });
        
        // 登录表单提交
        document.getElementById('login-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (await login(username, password)) {
                document.getElementById('login-modal').classList.remove('show');
                document.getElementById('login-error').classList.remove('show');
                document.getElementById('login-form').reset();
            } else {
                document.getElementById('login-error').classList.add('show');
            }
        });
        
        // 点击弹窗外部关闭
        document.getElementById('login-modal').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) {
                document.getElementById('login-modal').classList.remove('show');
            }
        });
        
        // ==================== 管理面板功能 ====================
        
        // 打开管理面板
        document.getElementById('admin-btn').addEventListener('click', () => {
            if (currentRole !== 'admin') {
                alert('只有管理员可以访问管理面板');
                return;
            }
            openAdminPanel();
        });
        
        // 关闭管理面板
        document.getElementById('close-admin').addEventListener('click', closeAdminPanel);
        
        // 点击弹窗外部关闭
        document.getElementById('admin-modal').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) {
                closeAdminPanel();
            }
        });
        
        // 打开管理面板
        function openAdminPanel() {
            document.getElementById('admin-modal').classList.add('show');
            renderAdminEditors();
        }
        
        // 关闭管理面板
        function closeAdminPanel() {
            document.getElementById('admin-modal').classList.remove('show');
        }
        
        // 渲染管理编辑器
        function renderAdminEditors() {
            // 确保配置数组存在
            if (!config.apps) config.apps = [];
            if (!config.favorites) config.favorites = [];
            if (!config.music) config.music = [];
            if (!config.quotes) config.quotes = [];
            
            // 渲染应用导航编辑器（简化版）
            const appsEditor = document.getElementById('apps-editor');
            appsEditor.innerHTML = config.apps.map((app, index) => {
                let iconDisplay;
                if (app.iconUrl) {
                    iconDisplay = `<img src="${app.iconUrl}">`;
                } else if (app.icon && app.icon.startsWith('fa-')) {
                    iconDisplay = `<i class="fas ${app.icon}"></i>`;
                } else {
                    iconDisplay = app.icon || '<i class="fas fa-rocket"></i>';
                }
                return `
                <div class="nav-item-row" data-index="${index}" data-type="app">
                    <div class="nav-icon-box">
                        <div class="nav-icon-display" id="app-icon-${index}">${iconDisplay}</div>
                        <button class="icon-action-btn" onclick="changeIcon('app', ${index})" title="从图标库选择"><i class="fas fa-palette"></i></button>
                        <button class="icon-action-btn upload" onclick="uploadIcon('app', ${index})" title="上传自定义图标"><i class="fas fa-upload"></i></button>
                    </div>
                    <input type="text" class="nav-name" value="${app.name || ''}" placeholder="应用名称" onchange="saveNavItem('app', ${index}, 'name', this.value)">
                    <input type="text" class="nav-url" value="${app.url || ''}" placeholder="http://localhost:3000" onchange="saveNavItem('app', ${index}, 'url', this.value)">
                    <button class="delete-btn" onclick="deleteApp(${index})"><i class="fas fa-trash"></i></button>
                </div>
            `}).join('');
            
            // 渲染底部导航编辑器（简化版）
            const favoritesEditor = document.getElementById('favorites-editor');
            favoritesEditor.innerHTML = config.favorites.map((fav, index) => {
                let iconDisplay;
                if (fav.iconUrl) {
                    iconDisplay = `<img src="${fav.iconUrl}">`;
                } else if (fav.icon && fav.icon.startsWith('fa-')) {
                    iconDisplay = `<i class="fas ${fav.icon}"></i>`;
                } else {
                    iconDisplay = fav.icon || '<i class="fas fa-link"></i>';
                }
                return `
                <div class="nav-item-row" data-index="${index}" data-type="favorite">
                    <div class="nav-icon-box">
                        <div class="nav-icon-display" id="fav-icon-${index}">${iconDisplay}</div>
                        <button class="icon-action-btn" onclick="changeIcon('favorite', ${index})" title="从图标库选择"><i class="fas fa-palette"></i></button>
                        <button class="icon-action-btn upload" onclick="uploadIcon('favorite', ${index})" title="上传自定义图标"><i class="fas fa-upload"></i></button>
                    </div>
                    <input type="text" class="nav-name" value="${fav.name || ''}" placeholder="网站名称" onchange="saveNavItem('favorite', ${index}, 'name', this.value)">
                    <input type="text" class="nav-url" value="${fav.url || ''}" placeholder="https://example.com" onchange="saveNavItem('favorite', ${index}, 'url', this.value)">
                    <button class="delete-btn" onclick="deleteFavorite(${index})"><i class="fas fa-trash"></i></button>
                </div>
            `}).join('');
            
            // 渲染音乐列表
            renderMusicList();
            
            // 渲染每日一言列表
            renderQuoteList();
        }

        // Font Awesome图标渲染函数
        function renderFAIcon(iconClass) {
            if (!iconClass) return '<i class="fas fa-star"></i>';
            if (iconClass.startsWith('fa-')) {
                return `<i class="fas ${iconClass}"></i>`;
            }
            return iconClass;
        }

        // 合并的图标库数据 - Font Awesome + 彩色Logo
        const ICON_LIBRARY = {
            '常用': [
                { type: 'fa', value: 'fa-house', name: '首页' },
                { type: 'fa', value: 'fa-user', name: '用户' },
                { type: 'fa', value: 'fa-gear', name: '设置' },
                { type: 'fa', value: 'fa-star', name: '收藏' },
                { type: 'fa', value: 'fa-heart', name: '喜欢' },
                { type: 'fa', value: 'fa-bell', name: '通知' },
                { type: 'fa', value: 'fa-calendar', name: '日历' },
                { type: 'fa', value: 'fa-folder', name: '文件夹' },
                { type: 'fa', value: 'fa-file', name: '文件' },
                { type: 'fa', value: 'fa-envelope', name: '邮件' },
                { type: 'fa', value: 'fa-search', name: '搜索' },
                { type: 'fa', value: 'fa-lock', name: '锁定' },
                { type: 'fa', value: 'fa-link', name: '链接' },
                { type: 'fa', value: 'fa-download', name: '下载' },
                { type: 'fa', value: 'fa-upload', name: '上传' },
                { type: 'fa', value: 'fa-plus', name: '添加' },
                { type: 'fa', value: 'fa-check', name: '完成' },
                { type: 'fa', value: 'fa-xmark', name: '关闭' },
                { type: 'fa', value: 'fa-trash', name: '删除' },
                { type: 'fa', value: 'fa-pen', name: '编辑' }
            ],
            '开发': [
                { type: 'fa', value: 'fa-code', name: '代码' },
                { type: 'fa', value: 'fa-terminal', name: '终端' },
                { type: 'fa', value: 'fa-database', name: '数据库' },
                { type: 'fa', value: 'fa-server', name: '服务器' },
                { type: 'fa', value: 'fa-bug', name: 'Bug' },
                { type: 'fa', value: 'fa-git', name: 'Git' },
                { type: 'logo', value: 'github.svg', name: 'GitHub' },
                { type: 'logo', value: 'gitlab.svg', name: 'GitLab' },
                { type: 'logo', value: 'bitbucket.svg', name: 'Bitbucket' },
                { type: 'logo', value: 'docker.svg', name: 'Docker' },
                { type: 'logo', value: 'kubernetes.svg', name: 'K8s' },
                { type: 'logo', value: 'vscode.svg', name: 'VS Code' },
                { type: 'logo', value: 'intellij.svg', name: 'IntelliJ' },
                { type: 'logo', value: 'pycharm.svg', name: 'PyCharm' },
                { type: 'logo', value: 'vim.svg', name: 'Vim' },
                { type: 'logo', value: 'neovim.svg', name: 'Neovim' },
                { type: 'logo', value: 'sublime.svg', name: 'Sublime' },
                { type: 'logo', value: 'postman.svg', name: 'Postman' },
                { type: 'fa', value: 'fa-laptop', name: '笔记本' }
            ],
            '编程语言': [
                { type: 'logo', value: 'python.svg', name: 'Python' },
                { type: 'logo', value: 'php.svg', name: 'PHP' },
                { type: 'logo', value: 'golang.svg', name: 'Go' },
                { type: 'logo', value: 'rust.svg', name: 'Rust' },
                { type: 'logo', value: 'nodejs.svg', name: 'Node.js' },
                { type: 'logo', value: 'typescript.svg', name: 'TypeScript' },
                { type: 'logo', value: 'react.svg', name: 'React' },
                { type: 'logo', value: 'laravel.svg', name: 'Laravel' }
            ],
            '数据库': [
                { type: 'logo', value: 'mysql.svg', name: 'MySQL' },
                { type: 'logo', value: 'postgresql.svg', name: 'PostgreSQL' },
                { type: 'logo', value: 'mongodb.svg', name: 'MongoDB' },
                { type: 'logo', value: 'redis.svg', name: 'Redis' }
            ],
            '服务器': [
                { type: 'logo', value: 'nginx.svg', name: 'Nginx' },
                { type: 'logo', value: 'apache.svg', name: 'Apache' }
            ],
            '云服务': [
                { type: 'fa', value: 'fa-cloud', name: '云' },
                { type: 'logo', value: 'google.svg', name: 'Google' },
                { type: 'logo', value: 'microsoft.svg', name: '微软' },
                { type: 'logo', value: 'dropbox.svg', name: 'Dropbox' },
                { type: 'logo', value: 'vercel.svg', name: 'Vercel' },
                { type: 'logo', value: 'netlify.svg', name: 'Netlify' },
                { type: 'logo', value: 'heroku.svg', name: 'Heroku' },
                { type: 'logo', value: 'cloudflare.svg', name: 'Cloudflare' },
                { type: 'logo', value: 'digitalocean.svg', name: 'DigitalOcean' },
                { type: 'fa', value: 'fa-wifi', name: 'WiFi' }
            ],
            '监控': [
                { type: 'logo', value: 'grafana.svg', name: 'Grafana' },
                { type: 'logo', value: 'prometheus.svg', name: 'Prometheus' },
                { type: 'logo', value: 'elastic.svg', name: 'Elastic' }
            ],
            '项目管理': [
                { type: 'logo', value: 'jira.svg', name: 'Jira' },
                { type: 'logo', value: 'trello.svg', name: 'Trello' },
                { type: 'logo', value: 'confluence.svg', name: 'Confluence' }
            ],
            '媒体': [
                { type: 'fa', value: 'fa-music', name: '音乐' },
                { type: 'fa', value: 'fa-video', name: '视频' },
                { type: 'fa', value: 'fa-camera', name: '相机' },
                { type: 'logo', value: 'spotify.svg', name: 'Spotify' },
                { type: 'logo', value: 'netflix.svg', name: 'Netflix' },
                { type: 'logo', value: 'youtube.svg', name: 'YouTube' }
            ],
            '社交': [
                { type: 'fa', value: 'fa-comments', name: '消息' },
                { type: 'logo', value: 'facebook.svg', name: 'Facebook' },
                { type: 'logo', value: 'instagram.svg', name: 'Instagram' },
                { type: 'logo', value: 'telegram.svg', name: 'Telegram' },
                { type: 'logo', value: 'whatsapp.svg', name: 'WhatsApp' },
                { type: 'logo', value: 'discord.svg', name: 'Discord' }
            ],
            '公司': [
                { type: 'logo', value: 'apple.svg', name: 'Apple' },
                { type: 'logo', value: 'google.svg', name: 'Google' },
                { type: 'logo', value: 'microsoft.svg', name: '微软' },
                { type: 'logo', value: 'github.svg', name: 'GitHub' }
            ],
            '浏览器': [
                { type: 'logo', value: 'chrome.svg', name: 'Chrome' }
            ],
            '工具': [
                { type: 'logo', value: 'slack.svg', name: 'Slack' },
                { type: 'logo', value: 'zoom.svg', name: 'Zoom' },
                { type: 'logo', value: 'notion.svg', name: 'Notion' },
                { type: 'logo', value: 'figma.svg', name: 'Figma' },
                { type: 'logo', value: 'sketch.svg', name: 'Sketch' },
                { type: 'logo', value: 'wordpress.svg', name: 'WordPress' },
                { type: 'fa', value: 'fa-gamepad', name: '游戏' }
            ],
            '创意': [
                { type: 'logo', value: 'photoshop.svg', name: 'Photoshop' },
                { type: 'logo', value: 'illustrator.svg', name: 'Illustrator' },
                { type: 'logo', value: 'premiere.svg', name: 'Premiere' }
            ]
        };

        // 渲染图标库
        function renderIconLibrary(filter = '') {
            const content = document.getElementById('icon-library-content');
            let html = '';
            
            for (const [category, icons] of Object.entries(ICON_LIBRARY)) {
                const filteredIcons = filter 
                    ? icons.filter(icon => icon.name.toLowerCase().includes(filter.toLowerCase()))
                    : icons;
                
                if (filteredIcons.length === 0) continue;
                
                html += `
                    <div class="icon-category">
                        <div class="icon-category-title">${category}</div>
                        <div class="icon-grid">
                            ${filteredIcons.map(icon => {
                                if (icon.type === 'fa') {
                                    return `<div class="icon-option" onclick="selectIconFromLibrary('fa', '${icon.value}')">
                                        <i class="fas ${icon.value}"></i>
                                        <span class="icon-option-name">${icon.name}</span>
                                    </div>`;
                                } else {
                                    return `<div class="icon-option" onclick="selectIconFromLibrary('logo', '${icon.value}')">
                                        <div style="width:32px;height:32px;display:flex;align-items:center;justify-content:center;">
                                            <img src="icons/logos/${icon.value}" alt="${icon.name}" style="max-width:100%;max-height:100%;object-fit:contain;" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                                            <i class="fas fa-image" style="display:none;font-size:20px;color:rgba(255,255,255,0.5);"></i>
                                        </div>
                                        <span class="icon-option-name">${icon.name}</span>
                                    </div>`;
                                }
                            }).join('')}
                        </div>
                    </div>
                `;
            }
            
            content.innerHTML = html || '<div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.5);">没有找到匹配的图标</div>';
        }

        // 过滤图标
        function filterIcons(query) {
            renderIconLibrary(query);
        }

        // 关闭图标库
        function closeIconLibrary() {
            document.getElementById('icon-library-modal').classList.remove('show');
            document.getElementById('icon-search-input').value = '';
            currentIconEditType = null;
            currentIconEditIndex = null;
        }

        // 更换图标
        window.changeIcon = function(type, index) {
            currentIconEditType = type;
            currentIconEditIndex = index;
            document.getElementById('icon-library-modal').classList.add('show');
            renderIconLibrary();
        }

        // 上传图标
        window.uploadIcon = function(type, index) {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = (e) => {
                const file = e.target.files[0];
                if (!file) return;
                if (!file.type.startsWith('image/')) {
                    alert('请选择图片文件');
                    return;
                }
                if (file.size > 2 * 1024 * 1024) {
                    alert('图片不能超过2MB');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = (event) => {
                    const dataUrl = event.target.result;
                    if (type === 'app') {
                        config.apps[index].icon = '';
                        config.apps[index].iconUrl = dataUrl;
                        document.getElementById(`app-icon-${index}`).innerHTML = `<img src="${dataUrl}">`;
                        saveConfig(config);
                        renderApps();
                    } else {
                        config.favorites[index].icon = '';
                        config.favorites[index].iconUrl = dataUrl;
                        document.getElementById(`fav-icon-${index}`).innerHTML = `<img src="${dataUrl}">`;
                        saveConfig(config);
                        renderFavorites();
                    }
                };
                reader.readAsDataURL(file);
            };
            input.click();
        }

        // 从图标库选择
        window.selectIconFromLibrary = function(iconType, iconValue) {
            if (currentIconEditType === null || currentIconEditIndex === null) return;
            
            if (currentIconEditType === 'app') {
                if (iconType === 'fa') {
                    config.apps[currentIconEditIndex].icon = iconValue;
                    config.apps[currentIconEditIndex].iconUrl = '';
                    document.getElementById(`app-icon-${currentIconEditIndex}`).innerHTML = renderFAIcon(iconValue);
                } else {
                    config.apps[currentIconEditIndex].icon = '';
                    config.apps[currentIconEditIndex].iconUrl = `icons/logos/${iconValue}`;
                    document.getElementById(`app-icon-${currentIconEditIndex}`).innerHTML = `<img src="icons/logos/${iconValue}" onerror="this.parentElement.innerHTML='<i class=\\'fas fa-rocket\\'></i>'">`;
                }
                saveConfig(config);
                renderApps();
            } else {
                if (iconType === 'fa') {
                    config.favorites[currentIconEditIndex].icon = iconValue;
                    config.favorites[currentIconEditIndex].iconUrl = '';
                    document.getElementById(`fav-icon-${currentIconEditIndex}`).innerHTML = renderFAIcon(iconValue);
                } else {
                    config.favorites[currentIconEditIndex].icon = '';
                    config.favorites[currentIconEditIndex].iconUrl = `icons/logos/${iconValue}`;
                    document.getElementById(`fav-icon-${currentIconEditIndex}`).innerHTML = `<img src="icons/logos/${iconValue}" onerror="this.parentElement.innerHTML='<i class=\\'fas fa-link\\'></i>'">`;
                }
                saveConfig(config);
                renderFavorites();
            }
            
            closeIconLibrary();
        }
        
        // 渲染音乐列表
        function renderMusicList() {
            const musicEditor = document.getElementById('music-list-editor');
            let html = '';
            
            // 添加标题
            html += '<h4 style="margin-bottom: 15px; color: rgba(255,255,255,0.8);">🎶 播放列表</h4>';
            
            if (!config.music || config.music.length === 0) {
                html += '<div style="text-align: center; color: rgba(255,255,255,0.4); padding: 30px; background: rgba(255,255,255,0.03); border-radius: 10px;">暂无音乐，请上传音乐文件</div>';
            } else {
                html += config.music.map((music, index) => {
                    const filename = music.split('/').pop();
                    const ext = filename.substring(filename.lastIndexOf('.')).toLowerCase();
                    const icon = ext === '.mp3' ? '🎵' : ext === '.wav' ? '🔊' : ext === '.flac' ? '🎼' : '🎶';
                    return `
                        <div class="music-list-item" data-index="${index}">
                            <span class="music-icon">${icon}</span>
                            <span class="music-name">${filename}</span>
                            <span class="music-status uploaded">已添加</span>
                            <button class="delete-btn" onclick="deleteMusic(${index})" title="删除这首音乐">🗑️</button>
                        </div>
                    `;
                }).join('');
                
                html += `<div style="margin-top: 15px; text-align: center; color: rgba(255,255,255,0.4); font-size: 13px;">共 ${config.music.length} 首音乐</div>`;
            }
            
            musicEditor.innerHTML = html;
        }
        
        // 渲染名言列表
        function renderQuoteList() {
            const quoteEditor = document.getElementById('quote-list-editor');
            if (!config.quotes || config.quotes.length === 0) {
                quoteEditor.innerHTML = '<div style="text-align: center; color: rgba(255,255,255,0.4); padding: 20px;">暂无名言，请添加或从文件加载</div>';
                return;
            }
            
            quoteEditor.innerHTML = config.quotes.map((quote, index) => `
                <div class="quote-item-row" data-index="${index}">
                    <input type="text" class="quote-text-input" value="${quote.text || ''}" placeholder="名言内容" onchange="updateQuote(${index}, 'text', this.value)">
                    <input type="text" class="quote-author-input" value="${quote.author || ''}" placeholder="作者" onchange="updateQuote(${index}, 'author', this.value)">
                    <button class="quote-delete-btn" onclick="deleteQuote(${index})">🗑️</button>
                </div>
            `).join('');
        }
        
        // 更新名言
        window.updateQuote = function(index, field, value) {
            config.quotes[index][field] = value;
            saveConfig(config);
        };
        
        // 删除应用
        window.deleteApp = function(index) {
            if (confirm('确定要删除这个应用吗？')) {
                config.apps.splice(index, 1);
                saveConfig(config);
                renderAdminEditors();
                renderApps();
            }
        };
        
        // 删除收藏
        window.deleteFavorite = function(index) {
            if (confirm('确定要删除这个网址吗？')) {
                config.favorites.splice(index, 1);
                saveConfig(config);
                renderAdminEditors();
                renderFavorites();
            }
        };
        
        // 删除音乐
        window.deleteMusic = function(index) {
            config.music.splice(index, 1);
            renderAdminEditors();
        };
        
        // 添加应用
        document.getElementById('add-app').addEventListener('click', () => {
            config.apps.push({ icon: '📱', name: '新应用', desc: '描述', url: 'http://' });
            renderAdminEditors();
        });
        
        // 添加收藏
        document.getElementById('add-favorite').addEventListener('click', () => {
            config.favorites.push({ icon: '🔗', name: '新网址', url: 'https://' });
            renderAdminEditors();
        });
        
        // 音乐文件上传功能
        const musicFileInput = document.getElementById('music-file-input');
        const musicUploadArea = document.getElementById('music-upload-area');
        const uploadProgress = document.getElementById('upload-progress');
        const progressFill = document.getElementById('progress-fill');
        const progressText = document.getElementById('progress-text');
        const selectedFilesText = document.getElementById('selected-files-text');
        const uploadConfirmBtn = document.getElementById('upload-confirm-btn');
        const clearFilesBtn = document.getElementById('clear-files-btn');
        const pendingFilesList = document.getElementById('pending-files-list');
        const pendingFilesContainer = document.getElementById('pending-files-container');
        
        // 暂存选中的文件
        let pendingMusicFiles = [];
        const MAX_FILES = 20;
        
        // 支持的音频格式
        const ALLOWED_AUDIO_TYPES = [
            'audio/mpeg',      // MP3
            'audio/wav',       // WAV
            'audio/ogg',       // OGG
            'audio/x-m4a',     // M4A
            'audio/mp4',       // M4A/MP4
            'audio/flac',      // FLAC
            'audio/x-flac'     // FLAC
        ];
        const ALLOWED_EXTENSIONS = ['.mp3', '.wav', '.ogg', '.m4a', '.flac', '.aac'];
        
        // 验证文件是否为音乐文件
        function isAudioFile(file) {
            if (ALLOWED_AUDIO_TYPES.includes(file.type)) {
                return true;
            }
            const ext = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();
            if (ALLOWED_EXTENSIONS.includes(ext)) {
                return true;
            }
            return false;
        }
        
        // 格式化文件大小
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 B';
            const k = 1024;
            const sizes = ['B', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
        }
        
        // 更新选择文件显示
        function updateSelectedFilesDisplay() {
            if (pendingMusicFiles.length === 0) {
                selectedFilesText.textContent = '未选择文件（最多20个）';
                uploadConfirmBtn.disabled = true;
                clearFilesBtn.style.display = 'none';
                pendingFilesList.style.display = 'none';
            } else {
                const validCount = pendingMusicFiles.filter(f => f.isValid).length;
                const invalidCount = pendingMusicFiles.length - validCount;
                selectedFilesText.textContent = `已选择 ${pendingMusicFiles.length}/20 个文件（${validCount} 个有效）`;
                uploadConfirmBtn.disabled = validCount === 0;
                clearFilesBtn.style.display = 'inline-block';
                pendingFilesList.style.display = 'block';
                renderPendingFilesList();
            }
        }
        
        // 渲染待上传文件列表
        function renderPendingFilesList() {
            pendingFilesContainer.innerHTML = pendingMusicFiles.map((fileInfo, index) => {
                const icon = fileInfo.isValid ? '🎵' : '❌';
                const statusClass = fileInfo.isValid ? 'valid' : 'invalid';
                const statusText = fileInfo.isValid ? '有效' : '无效';
                const nameClass = fileInfo.isValid ? '' : 'invalid';
                return `
                    <div class="pending-file-item ${fileInfo.isValid ? '' : 'invalid'}">
                        <span class="pending-file-icon">${icon}</span>
                        <span class="pending-file-name ${nameClass}" title="${fileInfo.name}">${fileInfo.name}</span>
                        <span class="pending-file-size">${formatFileSize(fileInfo.size)}</span>
                        <span class="pending-file-status ${statusClass}">${statusText}</span>
                        <button class="pending-file-remove" onclick="removePendingFile(${index})" title="移除">×</button>
                    </div>
                `;
            }).join('');
        }
        
        // 移除待上传文件
        window.removePendingFile = function(index) {
            pendingMusicFiles.splice(index, 1);
            updateSelectedFilesDisplay();
        };
        
        // 清空所有待上传文件
        function clearAllPendingFiles() {
            if (pendingMusicFiles.length === 0) return;
            if (confirm(`确定要清空所有 ${pendingMusicFiles.length} 个待添加文件吗？`)) {
                pendingMusicFiles = [];
                updateSelectedFilesDisplay();
                musicFileInput.value = '';
            }
        }
        
        // 处理文件选择（仅暂存，不上传）
        function handleFileSelection(files) {
            // 检查是否超过最大限制
            const remainingSlots = MAX_FILES - pendingMusicFiles.length;
            if (remainingSlots <= 0) {
                alert(`已达到最大限制（${MAX_FILES}个文件），请先添加或清空当前列表`);
                return;
            }
            
            let filesToProcess = Array.from(files);
            if (filesToProcess.length > remainingSlots) {
                alert(`只能选择 ${remainingSlots} 个文件（已达到${MAX_FILES}个限制）`);
                filesToProcess = filesToProcess.slice(0, remainingSlots);
            }
            
            const newFiles = filesToProcess.map(file => ({
                file: file,
                isValid: isAudioFile(file),
                name: file.name,
                size: file.size
            }));
            
            // 过滤掉重复文件
            const existingNames = new Set(pendingMusicFiles.map(f => f.name));
            const uniqueFiles = newFiles.filter(f => !existingNames.has(f.name));
            
            if (uniqueFiles.length < newFiles.length) {
                const duplicates = newFiles.filter(f => existingNames.has(f.name)).map(f => f.name);
                alert(`以下文件已在列表中，已跳过：\n${duplicates.join('\n')}`);
            }
            
            pendingMusicFiles = pendingMusicFiles.concat(uniqueFiles);
            updateSelectedFilesDisplay();
        }
        
        // 执行上传（添加到列表）
        function executeUpload() {
            const validFiles = pendingMusicFiles.filter(f => f.isValid);
            
            if (validFiles.length === 0) {
                alert('没有有效的音乐文件可添加');
                return;
            }
            
            // 显示上传进度
            uploadProgress.style.display = 'block';
            pendingFilesList.style.display = 'none';
            progressFill.style.width = '0%';
            progressText.textContent = `准备添加 ${validFiles.length} 个文件...`;
            
            let currentIndex = 0;
            const totalFiles = validFiles.length;
            
            function addNext() {
                if (currentIndex >= totalFiles) {
                    // 添加完成
                    setTimeout(() => {
                        uploadProgress.style.display = 'none';
                        progressFill.style.width = '0%';
                        pendingMusicFiles = [];
                        updateSelectedFilesDisplay();
                        musicFileInput.value = '';
                        renderMusicList();
                        alert(`成功添加 ${totalFiles} 首音乐到播放列表！`);
                    }, 500);
                    return;
                }
                
                const fileInfo = validFiles[currentIndex];
                const progress = ((currentIndex + 1) / totalFiles) * 100;
                
                progressFill.style.width = progress + '%';
                progressText.textContent = `正在添加: ${fileInfo.name} (${currentIndex + 1}/${totalFiles})`;
                
                // 添加到配置
                config.music.push(`music/${fileInfo.name}`);
                
                currentIndex++;
                setTimeout(addNext, 150);
            }
            
            addNext();
        }
        
        // 文件选择事件
        musicFileInput.addEventListener('change', (e) => {
            if (e.target.files && e.target.files.length > 0) {
                handleFileSelection(e.target.files);
                e.target.value = ''; // 清空选择，允许重复选择
            }
        });
        
        // 上传按钮事件
        uploadConfirmBtn.addEventListener('click', executeUpload);
        
        // 清空按钮事件
        clearFilesBtn.addEventListener('click', clearAllPendingFiles);
        
        // 拖拽事件
        musicUploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            e.stopPropagation();
            musicUploadArea.style.borderColor = '#007AFF';
        });
        
        musicUploadArea.addEventListener('dragleave', (e) => {
            e.preventDefault();
            e.stopPropagation();
            musicUploadArea.style.borderColor = 'rgba(0, 122, 255, 0.15)';
        });
        
        musicUploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            e.stopPropagation();
            musicUploadArea.style.borderColor = 'rgba(0, 122, 255, 0.15)';
            
            const files = Array.from(e.dataTransfer.files);
            if (files.length > 0) {
                handleFileSelection(files);
            }
        });
        
        // 从文件加载名言
        // 从文件选择器加载名言
        document.getElementById('load-quotes-file').addEventListener('click', () => {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.txt';
            input.onchange = async (e) => {
                const file = e.target.files[0];
                if (!file) return;
                
                try {
                    const text = await file.text();
                    const lines = text.trim().split('\n').filter(line => line.trim());
                    
                    config.quotes = lines.map(line => {
                        // 格式："句子内容 作者"
                        // 从最后一个空格分割，前面是句子，后面是作者
                        const lastSpaceIndex = line.lastIndexOf(' ');
                        if (lastSpaceIndex > 0) {
                            const text = line.substring(0, lastSpaceIndex).trim();
                            const author = line.substring(lastSpaceIndex + 1).trim();
                            return { text, author: author || '佚名' };
                        }
                        // 如果没有空格，整行作为句子，作者为佚名
                        return { text: line.trim(), author: '佚名' };
                    }).filter(q => q.text);
                    
                    saveConfig(config);
                    renderQuoteList();
                    alert(`已从 ${file.name} 加载 ${config.quotes.length} 条名言`);
                } catch (error) {
                    alert('加载文件失败: ' + error.message);
                }
            };
            input.click();
        });
        
        // 添加新名言
        document.getElementById('add-quote-line').addEventListener('click', () => {
            config.quotes.push({ text: '', author: '' });
            saveConfig(config);
            renderQuoteList();
            // 滚动到底部
            const editor = document.getElementById('quote-list-editor');
            editor.scrollTop = editor.scrollHeight;
        });
        
        // 删除名言
        window.deleteQuote = function(index) {
            config.quotes.splice(index, 1);
            saveConfig(config);
            renderQuoteList();
        };
        
        // 管理标签切换
        document.querySelectorAll('.admin-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.admin-section').forEach(s => s.classList.remove('active'));
                
                tab.classList.add('active');
                document.getElementById(`tab-${tab.dataset.tab}`).classList.add('active');
                
                // 切换到站点设置时加载密码保护设置
                if (tab.dataset.tab === 'settings') {
                    loadPagePasswordSettings();
                }
                // 切换到账户管理时更新用户显示
                else if (tab.dataset.tab === 'account') {
                    updateCurrentUserDisplay();
                }
            });
        });

        // 自动保存单个导航项
        window.saveNavItem = function(type, index, field, value) {
            if (type === 'app') {
                config.apps[index][field] = value;
            } else {
                config.favorites[index][field] = value;
            }
            saveConfig(config);
            if (type === 'app') {
                renderApps();
            } else {
                renderFavorites();
            }
        }
        


        // 初始化渲染
        renderApps();
        renderFavorites();

        // 更新时间 - 北京时间
        function updateDateTime() {
            const now = new Date();
            // 转换为北京时间 (UTC+8)
            const beijingTime = new Date(now.getTime() + (now.getTimezoneOffset() + 480) * 60000);
            
            const month = String(beijingTime.getMonth() + 1).padStart(2, '0');
            const day = String(beijingTime.getDate()).padStart(2, '0');
            const hours = String(beijingTime.getHours()).padStart(2, '0');
            const minutes = String(beijingTime.getMinutes()).padStart(2, '0');
            
            document.getElementById('current-date').textContent = `${month}/${day}`;
            document.getElementById('current-time').textContent = `${hours}:${minutes}`;
        }
        
        setInterval(updateDateTime, 1000);
        updateDateTime();

        // 天气 - 城市搜索和自动刷新
        let currentCity = ''; // 默认城市
        let weatherRefreshInterval = null;
        
        async function getWeather(city = '') {
            try {
                const cityParam = city ? `/${encodeURIComponent(city)}` : '';
                const response = await fetch(`https://wttr.in${cityParam}?format=j1`, { mode: 'cors' });
                if (response.ok) {
                    const data = JSON.parse(await response.text());
                    const current = data.current_condition[0];
                    const temp = current.temp_C + '°C';
                    const cityName = city || data.nearest_area[0].areaName[0].value;
                    
                    document.getElementById('weather-city').textContent = cityName;
                    document.getElementById('weather-info').textContent = temp;
                    localStorage.setItem('weatherCity', cityName);
                    currentCity = cityName;
                }
            } catch (e) {
                console.error('获取天气失败:', e);
                // 使用免费 API 备用
                try {
                    const cityCoords = {
                        '北京': '39.9,116.4',
                        '上海': '31.2,121.5', 
                        '深圳': '22.5,114.1',
                        '广州': '23.1,113.3',
                        '东莞': '23.0,113.7',
                        '金昌': '38.5,102.2'
                    };
                    const coords = cityCoords[city] || '39.9,116.4';
                    const [lat, lon] = coords.split(',');
                    const response = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`, { mode: 'cors' });
                    if (response.ok) {
                        const data = await response.json();
                        const temp = Math.round(data.current_weather.temperature) + '°C';
                        const cityName = city || '北京';
                        document.getElementById('weather-city').textContent = cityName;
                        document.getElementById('weather-info').textContent = temp;
                        localStorage.setItem('weatherCity', cityName);
                        currentCity = cityName;
                    } else {
                        document.getElementById('weather-city').textContent = city || '天气';
                        document.getElementById('weather-info').textContent = '--°C';
                    }
                } catch (e2) {
                    document.getElementById('weather-city').textContent = city || '天气';
                    document.getElementById('weather-info').textContent = '--°C';
                }
            }
        }
        
        // 搜索城市
        function searchCity() {
            const input = document.getElementById('city-search-input');
            const query = input.value.trim();
            if (query) {
                getWeather(query);
                closeCitySelector();
            }
        }
        
        // 选择预设城市
        function selectCity(city) {
            getWeather(city);
            closeCitySelector();
        }
        
        // 打开城市选择器
        function openCitySelector() {
            document.getElementById('city-selector').classList.add('show');
        }
        
        // 关闭城市选择器
        function closeCitySelector() {
            document.getElementById('city-selector').classList.remove('show');
            const input = document.getElementById('city-search-input');
            if (input) input.value = '';
        }
        
        // 初始化天气 - 加载保存的城市
        function initWeather() {
            const savedCity = localStorage.getItem('weatherCity');
            currentCity = savedCity || '';
            getWeather(currentCity);
            
            // 每小时刷新天气
            if (weatherRefreshInterval) clearInterval(weatherRefreshInterval);
            weatherRefreshInterval = setInterval(() => getWeather(currentCity), 3600000); // 1小时
        }
        
        // 页面加载时初始化天气
        initWeather();
        
        document.getElementById('weather-item').addEventListener('click', (e) => {
            // 如果点击的是城市选择器内部，不关闭
            if (e.target.closest('.city-selector')) return;
            const selector = document.getElementById('city-selector');
            if (selector.classList.contains('show')) {
                closeCitySelector();
            } else {
                openCitySelector();
            }
        });
        
        // 初始化天气
        initWeather();

        // 名言随机显示 - 从quotes.txt文件加载
        let quotes = [];
        let quoteInterval = null;
        const QUOTE_SWITCH_INTERVAL = 8000; // 8秒切换一次

        // 字体风格配置（10种中文字体）
        const FONT_STYLES = ['style-1', 'style-2', 'style-3', 'style-4', 'style-5', 'style-6', 'style-7', 'style-8', 'style-9', 'style-10'];
        
        // 颜色配置（10种亮色系，确保与黑色背景反差大）
        const COLORS = ['color-1', 'color-2', 'color-3', 'color-4', 'color-5', 'color-6', 'color-7', 'color-8', 'color-9', 'color-10'];

        // 从配置或文本文件加载名言
        async function loadQuotes() {
            // 优先使用管理员配置的名言
            if (config.quotes && config.quotes.length > 0) {
                quotes = config.quotes;
                showRandomQuote();
                startQuoteRotation();
                return;
            }
            
            try {
                const response = await fetch('quotes.txt');
                if (!response.ok) {
                    throw new Error('无法加载名言文件');
                }
                const text = await response.text();
                // 解析每行：名言内容|作者名
                quotes = text.trim().split('\n').map(line => {
                    const parts = line.split('|');
                    return {
                        text: parts[0].trim(),
                        author: parts[1] ? parts[1].trim() : '佚名'
                    };
                }).filter(q => q.text);
                
                // 加载完成后初始化
                showRandomQuote();
                startQuoteRotation();
            } catch (error) {
                console.error('加载名言失败:', error);
                // 使用默认名言作为备用
                quotes = DEFAULT_CONFIG.quotes;
                showRandomQuote();
                startQuoteRotation();
            }
        }

        // 获取随机字体风格
        function getRandomFontStyle() {
            return FONT_STYLES[Math.floor(Math.random() * FONT_STYLES.length)];
        }

        // 获取随机颜色
        function getRandomColor() {
            return COLORS[Math.floor(Math.random() * COLORS.length)];
        }

        // 显示随机名言
        function showRandomQuote() {
            if (quotes.length === 0) return;
            
            const quoteText = document.getElementById('quote-text');
            const quoteAuthor = document.getElementById('quote-author');
            
            // 随机选择一个名言
            const randomIndex = Math.floor(Math.random() * quotes.length);
            const quote = quotes[randomIndex];
            const fontStyle = getRandomFontStyle();
            const color = getRandomColor();
            
            // 移除所有字体风格类和颜色类
            FONT_STYLES.forEach(style => quoteText.classList.remove(style));
            COLORS.forEach(c => quoteText.classList.remove(c));
            
            // 淡出动画
            quoteText.style.opacity = '0';
            quoteText.style.transform = 'translateY(20px) scale(0.95)';
            quoteAuthor.style.opacity = '0';
            quoteAuthor.style.transform = 'translateY(10px)';
            
            setTimeout(() => {
                // 更新内容
                quoteText.textContent = quote.text;
                quoteAuthor.textContent = `— ${quote.author}`;
                
                // 添加随机字体风格和颜色
                quoteText.classList.add(fontStyle);
                quoteText.classList.add(color);
                
                // 淡入动画
                quoteText.style.opacity = '1';
                quoteText.style.transform = 'translateY(0) scale(1)';
                quoteAuthor.style.opacity = '1';
                quoteAuthor.style.transform = 'translateY(0)';
            }, 400);
        }

        // 启动名言轮换
        function startQuoteRotation() {
            if (quoteInterval) {
                clearInterval(quoteInterval);
            }
            quoteInterval = setInterval(() => {
                if (!document.hidden) {
                    showRandomQuote();
                }
            }, QUOTE_SWITCH_INTERVAL);
        }

        // 停止名言轮换
        function stopQuoteRotation() {
            if (quoteInterval) {
                clearInterval(quoteInterval);
                quoteInterval = null;
            }
        }

        // 点击名言区域立即切换
        document.querySelector('.quote-container').addEventListener('click', () => {
            showRandomQuote();
        });

        // 页面可见性变化时控制轮换
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                stopQuoteRotation();
            } else {
                startQuoteRotation();
            }
        });

        // 加载名言并初始化
        loadQuotes();

        // 摄影作品 - 使用示例图片
        const galleryImages = {
            landscape: [
                { url: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=600&h=750&fit=crop', title: '阿尔卑斯山', desc: '壮丽的雪山日出' },
                { url: 'https://images.unsplash.com/photo-1433086966358-54859d0ed716?w=600&h=750&fit=crop', title: '瀑布森林', desc: '隐秘的自然奇观' },
                { url: 'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=600&h=750&fit=crop', title: '迷雾山谷', desc: '清晨的宁静时刻' },
                { url: 'https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=600&h=750&fit=crop', title: '日出山峰', desc: '金色的光芒' },
                { url: 'https://images.unsplash.com/photo-1447752875215-b2761acb3c5d?w=600&h=750&fit=crop', title: '森林小径', desc: '阳光透过树叶' },
                { url: 'https://images.unsplash.com/photo-1501854140801-50d01698950b?w=600&h=750&fit=crop', title: '海岸风光', desc: '碧海蓝天' },
                { url: 'https://images.unsplash.com/photo-1426604966848-d7adac402bff?w=600&h=750&fit=crop', title: '山脉倒影', desc: '湖光山色' },
                { url: 'https://images.unsplash.com/photo-1472214103451-9374bd1c798e?w=600&h=750&fit=crop', title: '草原风光', desc: '广阔无垠' },
                { url: 'https://images.unsplash.com/photo-1475924156734-496f6cac6ec1?w=600&h=750&fit=crop', title: '云海日出', desc: '壮观的景象' }
            ],
            portrait: [
                { url: 'https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=600&h=750&fit=crop', title: '光影肖像', desc: '自然光下的优雅' },
                { url: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=600&h=750&fit=crop', title: '城市女孩', desc: '都市时尚风格' },
                { url: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=600&h=750&fit=crop', title: '阳光少年', desc: '青春的笑容' },
                { url: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=600&h=750&fit=crop', title: '微笑女孩', desc: '温暖的笑容' },
                { url: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=600&h=750&fit=crop', title: '成熟男士', desc: '自信的眼神' },
                { url: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=600&h=750&fit=crop', title: '文艺青年', desc: '知性的气质' },
                { url: 'https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=600&h=750&fit=crop', title: '街头肖像', desc: '城市的面孔' },
                { url: 'https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=600&h=750&fit=crop', title: '黑白色调', desc: '经典的魅力' },
                { url: 'https://images.unsplash.com/photo-1531123897727-8f129e1688ce?w=600&h=750&fit=crop', title: '时尚模特', desc: '潮流的风向' }
            ],
            humanity: [
                { url: 'https://images.unsplash.com/photo-1516826957135-700dedea698c?w=600&h=750&fit=crop', title: '老街巷弄', desc: '岁月的故事' },
                { url: 'https://images.unsplash.com/photo-1517457373958-b7bdd4587205?w=600&h=750&fit=crop', title: '市集热闹', desc: '生活的烟火气' },
                { url: 'https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=600&h=750&fit=crop', title: '工匠手艺', desc: '传统的传承' },
                { url: 'https://images.unsplash.com/photo-1529156069898-49953e39b3ac?w=600&h=750&fit=crop', title: '家庭时光', desc: '温馨的时刻' },
                { url: 'https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?w=600&h=750&fit=crop', title: '街头艺人', desc: '才华的展示' },
                { url: 'https://images.unsplash.com/photo-1511632765486-a01980e01a18?w=600&h=750&fit=crop', title: '节庆活动', desc: '欢乐的气氛' },
                { url: 'https://images.unsplash.com/photo-1523580494863-6f3031224c94?w=600&h=750&fit=crop', title: '工作场景', desc: '忙碌的身影' },
                { url: 'https://images.unsplash.com/photo-1509099836639-18ba1795216d?w=600&h=750&fit=crop', title: '儿童嬉戏', desc: '天真的笑容' },
                { url: 'https://images.unsplash.com/photo-1491438590914-bc09fcaaf77a?w=600&h=750&fit=crop', title: '友谊时刻', desc: '真挚的情谊' }
            ],
            other: [
                { url: 'https://images.unsplash.com/photo-1550684848-fac1c5b4e853?w=600&h=750&fit=crop', title: '霓虹都市', desc: '赛博朋克之夜' },
                { url: 'https://images.unsplash.com/photo-1494438639946-1ebd1d20bf85?w=600&h=750&fit=crop', title: '极简建筑', desc: '线条与光影' },
                { url: 'https://images.unsplash.com/photo-1558591710-4b4a1ae0f04d?w=600&h=750&fit=crop', title: '抽象色彩', desc: '艺术的碰撞' },
                { url: 'https://images.unsplash.com/photo-1518640467707-6811f4a6ab73?w=600&h=750&fit=crop', title: '微距世界', desc: '细节的奥秘' },
                { url: 'https://images.unsplash.com/photo-1509021436665-8f07dbf5bf1d?w=600&h=750&fit=crop', title: '几何图形', desc: '数学之美' },
                { url: 'https://images.unsplash.com/photo-1513542789411-b6a5d4f31634?w=600&h=750&fit=crop', title: '美食摄影', desc: '视觉的盛宴' },
                { url: 'https://images.unsplash.com/photo-1493246507139-91e8fad9978e?w=600&h=750&fit=crop', title: '动物世界', desc: '自然的生灵' },
                { url: 'https://images.unsplash.com/photo-1518173946687-a4c036bc3c95?w=600&h=750&fit=crop', title: '夜景摄影', desc: '城市的灯火' },
                { url: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=600&h=750&fit=crop', title: '水下世界', desc: '深蓝的神秘' }
            ]
        };

        let currentGalleryCategory = 'landscape';
        let galleryRefreshInterval = null;
        let currentGalleryImages = [];

        // 从数组中随机选取3个不重复的元素
        function getRandomImages(images, count = 3) {
            const shuffled = [...images].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

        // 预加载图片
        function preloadImage(url) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.onload = () => resolve(url);
                img.onerror = reject;
                img.src = url;
            });
        }

        // 平滑更新画廊（带淡入淡出效果）
        async function updateGallerySmooth(category) {
            const grid = document.getElementById('gallery-grid');
            const items = grid.querySelectorAll('.gallery-item');
            // 合并默认图片和用户上传的图片
            const allImages = [...(galleryImages[category] || []), ...(window.galleryData[category] || [])];
            const newImages = getRandomImages(allImages);
            
            // 预加载所有新图片
            await Promise.all(newImages.map(img => preloadImage(img.url || img.src)));
            
            // 淡出当前图片
            items.forEach(item => {
                const img = item.querySelector('img');
                if (img) {
                    img.classList.add('fade-out');
                    img.classList.remove('fade-in');
                }
            });
            
            // 等待淡出完成
            await new Promise(resolve => setTimeout(resolve, 800));
            
            // 更新图片和文字
            items.forEach((item, index) => {
                const img = item.querySelector('img');
                const title = item.querySelector('.gallery-title');
                const desc = item.querySelector('.gallery-desc');
                
                if (newImages[index]) {
                    if (img) {
                        img.src = newImages[index].url || newImages[index].src;
                        img.alt = newImages[index].title;
                        img.classList.remove('fade-out');
                        img.classList.add('fade-in');
                    }
                    if (title) title.textContent = newImages[index].title;
                    if (desc) desc.textContent = newImages[index].desc;
                }
            });
            
            currentGalleryImages = newImages;
        }

        function renderGallery(category) {
            const grid = document.getElementById('gallery-grid');
            // 合并默认图片和用户上传的图片
            const allImages = [...(galleryImages[category] || []), ...(window.galleryData[category] || [])];
            const images = getRandomImages(allImages);
            currentGalleryImages = images;
            
            grid.innerHTML = images.map((img, index) => `
                <div class="gallery-item" style="animation: fadeInUp 0.6s ease ${index * 0.15}s both;">
                    <img src="${img.url || img.src}" alt="${img.title}" loading="lazy" class="fade-in">
                    <div class="gallery-overlay">
                        <div class="gallery-title">${img.title}</div>
                        <div class="gallery-desc">${img.desc}</div>
                    </div>
                </div>
            `).join('');
        }

        // 启动自动刷新
        function startGalleryAutoRefresh() {
            if (galleryRefreshInterval) {
                clearInterval(galleryRefreshInterval);
            }
            galleryRefreshInterval = setInterval(() => {
                if (!document.hidden) {
                    updateGallerySmooth(currentGalleryCategory);
                }
            }, 10000);
        }

        // 停止自动刷新
        function stopGalleryAutoRefresh() {
            if (galleryRefreshInterval) {
                clearInterval(galleryRefreshInterval);
                galleryRefreshInterval = null;
            }
        }

        document.querySelectorAll('.gallery-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.gallery-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                currentGalleryCategory = tab.dataset.category;
                renderGallery(currentGalleryCategory);
                startGalleryAutoRefresh();
            });
        });

        // 页面可见性变化时控制刷新
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                stopGalleryAutoRefresh();
            } else {
                startGalleryAutoRefresh();
            }
        });

        // 滚动提示点击事件
        document.querySelector('.scroll-hint').addEventListener('click', () => {
            document.getElementById('gallery').scrollIntoView({ behavior: 'smooth' });
        });

        // 音乐播放器
        let musicList = config.music || DEFAULT_CONFIG.music;
        
        let currentMusicIndex = -1;
        let audio = null;
        let isPlaying = false;
        
        function getRandomMusic() {
            let newIndex;
            do {
                newIndex = Math.floor(Math.random() * musicList.length);
            } while (newIndex === currentMusicIndex && musicList.length > 1);
            currentMusicIndex = newIndex;
            return musicList[newIndex];
        }
        
        function initMusicPlayer() {
            audio = new Audio();
            audio.volume = 0.5;
            
            audio.addEventListener('ended', () => {
                playRandomMusic();
            });
            
            audio.addEventListener('error', (e) => {
                console.error('音乐播放错误:', e);
                setTimeout(() => playRandomMusic(), 1000);
            });
        }
        
        function playRandomMusic() {
            if (!audio) initMusicPlayer();
            
            const musicSrc = getRandomMusic();
            audio.src = musicSrc;
            audio.play().then(() => {
                isPlaying = true;
                updateMusicControlUI();
                console.log('正在播放:', musicSrc);
            }).catch(error => {
                console.error('播放失败:', error);
                isPlaying = false;
                updateMusicControlUI();
            });
        }
        
        function toggleMusic() {
            if (!audio) initMusicPlayer();
            
            if (isPlaying) {
                audio.pause();
                isPlaying = false;
            } else {
                if (!audio.src || audio.ended) {
                    playRandomMusic();
                } else {
                    audio.play().then(() => {
                        isPlaying = true;
                    }).catch(error => {
                        console.error('播放失败:', error);
                        playRandomMusic();
                    });
                }
            }
            updateMusicControlUI();
            openMusicPlaylist();
        }

        function openMusicPlaylist() {
            renderPlaylist();
            document.getElementById('music-playlist-modal').classList.add('show');
        }

        function closeMusicPlaylist() {
            document.getElementById('music-playlist-modal').classList.remove('show');
        }

        function renderPlaylist() {
            const content = document.getElementById('music-playlist-content');
            
            if (!musicList || musicList.length === 0) {
                content.innerHTML = '<div class="music-empty"><i class="fas fa-music" style="font-size: 40px; margin-bottom: 10px; opacity: 0.3;"></i><div>播放列表为空</div></div>';
                return;
            }

            content.innerHTML = musicList.map((music, index) => {
                const filename = music.split('/').pop();
                const isActive = index === currentMusicIndex;
                return `
                    <div class="music-playlist-item ${isActive ? 'active' : ''}" onclick="playMusic(${index})">
                        <div class="music-playlist-item-icon">
                            <i class="fas fa-music"></i>
                        </div>
                        <div class="music-playlist-item-name">${filename}</div>
                        <div class="music-playlist-item-playing">
                            <i class="fas fa-volume-high"></i>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function playMusic(index) {
            if (!audio) initMusicPlayer();
            
            currentMusicIndex = index;
            audio.src = musicList[index];
            audio.play().then(() => {
                isPlaying = true;
                updateMusicControlUI();
                updatePlaylistPlayButton();
                renderPlaylist();
                console.log('正在播放:', musicList[index]);
            }).catch(error => {
                console.error('播放失败:', error);
            });
        }

        function playPreviousMusic() {
            if (musicList.length === 0) return;
            
            if (currentMusicIndex <= 0) {
                currentMusicIndex = musicList.length - 1;
            } else {
                currentMusicIndex--;
            }
            playMusic(currentMusicIndex);
        }

        function playNextMusic() {
            if (musicList.length === 0) return;
            
            if (currentMusicIndex >= musicList.length - 1) {
                currentMusicIndex = 0;
            } else {
                currentMusicIndex++;
            }
            playMusic(currentMusicIndex);
        }

        function togglePlaylistPlay() {
            if (!audio) initMusicPlayer();
            
            if (isPlaying) {
                audio.pause();
                isPlaying = false;
            } else {
                if (!audio.src || audio.ended) {
                    if (currentMusicIndex < 0) {
                        playRandomMusic();
                    } else {
                        audio.play().then(() => {
                            isPlaying = true;
                        }).catch(error => {
                            console.error('播放失败:', error);
                            playRandomMusic();
                        });
                    }
                } else {
                    audio.play().then(() => {
                        isPlaying = true;
                    }).catch(error => {
                        console.error('播放失败:', error);
                    });
                }
            }
            updateMusicControlUI();
            updatePlaylistPlayButton();
        }

        function updatePlaylistPlayButton() {
            const btn = document.getElementById('playlist-play-btn');
            if (isPlaying) {
                btn.innerHTML = '<i class="fas fa-pause"></i>';
            } else {
                btn.innerHTML = '<i class="fas fa-play"></i>';
            }
        }

        // 音量控制
        const volumeSlider = document.getElementById('music-volume-slider');
        if (volumeSlider) {
            volumeSlider.addEventListener('input', (e) => {
                if (!audio) initMusicPlayer();
                audio.volume = e.target.value;
            });
        }

        // 点击弹窗外部关闭
        document.getElementById('music-playlist-modal').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) {
                closeMusicPlaylist();
            }
        });
        
        function updateMusicControlUI() {
            const control = document.getElementById('music-control');
            if (isPlaying) {
                control.classList.add('playing');
                control.setAttribute('data-state', 'on');
            } else {
                control.classList.remove('playing');
                control.setAttribute('data-state', 'off');
            }
        }
        
        // 绑定音乐控制按钮
        document.getElementById('music-control').addEventListener('click', toggleMusic);
        
        // 初始化播放器（不自动播放，等待用户点击）
        initMusicPlayer();
        updateMusicControlUI();

        // 初始化
        renderGallery('landscape');
        startGalleryAutoRefresh();

        // ==================== 页面密码保护 ====================
        // 密码验证
        document.getElementById('page-lock-submit').addEventListener('click', () => {
            const input = document.getElementById('page-lock-password');
            const error = document.getElementById('page-lock-error');
            const savedPassword = localStorage.getItem('pagePassword');
            
            if (input.value === savedPassword) {
                sessionStorage.setItem('pageUnlocked', 'true');
                document.getElementById('page-lock-overlay').classList.remove('show');
                document.body.style.overflow = '';
                error.classList.remove('show');
                input.value = '';
            } else {
                error.classList.add('show');
                input.value = '';
                input.focus();
            }
        });

        // 回车提交
        document.getElementById('page-lock-password').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                document.getElementById('page-lock-submit').click();
            }
        });

        // ==================== 站点设置 ====================
        // 加载保存的站点名称
        function loadSiteName() {
            const savedName = localStorage.getItem('siteName');
            if (savedName) {
                document.querySelector('.site-name').textContent = savedName;
                document.getElementById('site-name-input').value = savedName;
            }
        }
        loadSiteName();

        // 加载页面密码保护设置
        function loadPagePasswordSettings() {
            const isEnabled = localStorage.getItem('pagePasswordEnabled') === 'true';
            const savedPassword = localStorage.getItem('pagePassword') || '';
            
            document.getElementById('page-password-toggle').checked = isEnabled;
            document.getElementById('page-password-input').value = savedPassword;
            
            // 显示/隐藏密码输入框
            document.getElementById('page-password-input-container').style.display = isEnabled ? 'block' : 'none';
        }

        // 切换密码保护开关
        document.getElementById('page-password-toggle').addEventListener('change', (e) => {
            const isEnabled = e.target.checked;
            document.getElementById('page-password-input-container').style.display = isEnabled ? 'block' : 'none';
            
            if (!isEnabled) {
                // 关闭时清除密码
                localStorage.removeItem('pagePasswordEnabled');
                localStorage.removeItem('pagePassword');
                sessionStorage.removeItem('pageUnlocked');
                alert('页面密码保护已关闭');
            } else {
                // 开启时立即设置标志（密码在保存按钮中设置）
                localStorage.setItem('pagePasswordEnabled', 'true');
                document.getElementById('page-password-input').focus();
            }
        });

        // 保存页面密码
        document.getElementById('save-page-password').addEventListener('click', () => {
            const password = document.getElementById('page-password-input').value;
            const isEnabled = document.getElementById('page-password-toggle').checked;
            
            if (isEnabled && !password) {
                alert('请输入访问密码');
                return;
            }
            
            if (isEnabled) {
                localStorage.setItem('pagePasswordEnabled', 'true');
                localStorage.setItem('pagePassword', password);
                alert('页面密码保护已开启，下次访问需要输入密码');
            }
        });

        // 保存站点名称
        document.getElementById('save-site-name').addEventListener('click', () => {
            const newName = document.getElementById('site-name-input').value.trim();
            if (newName) {
                localStorage.setItem('siteName', newName);
                document.querySelector('.site-name').textContent = newName;
                alert('站点名称已保存！');
            }
        });

        // 导出配置
        document.getElementById('export-config').addEventListener('click', () => {
            const exportData = {
                siteName: localStorage.getItem('siteName') || 'Alix Go',
                siteConfig: JSON.parse(localStorage.getItem('siteConfig') || '{}'),
                users: JSON.parse(localStorage.getItem('customUsers') || '[]'),
                pagePasswordEnabled: localStorage.getItem('pagePasswordEnabled') === 'true',
                pagePassword: localStorage.getItem('pagePassword') || '',
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `alix-go-config-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
        });

        // 导入配置
        document.getElementById('import-config').addEventListener('click', () => {
            document.getElementById('import-file-input').click();
        });

        document.getElementById('import-file-input').addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (event) => {
                try {
                    const importData = JSON.parse(event.target.result);
                    
                    if (confirm('导入配置将覆盖当前所有设置，是否继续？')) {
                        // 导入站点名称
                        if (importData.siteName) {
                            localStorage.setItem('siteName', importData.siteName);
                            document.querySelector('.site-name').textContent = importData.siteName;
                            document.getElementById('site-name-input').value = importData.siteName;
                        }
                        
                        // 导入配置
                        if (importData.siteConfig) {
                            localStorage.setItem('siteConfig', JSON.stringify(importData.siteConfig));
                            config = importData.siteConfig;
                            renderApps();
                            renderFavorites();
                        }
                        
                        // 导入用户
                        if (importData.users) {
                            localStorage.setItem('customUsers', JSON.stringify(importData.users));
                        }
                        
                        // 导入页面密码保护设置
                        if (importData.pagePasswordEnabled !== undefined) {
                            localStorage.setItem('pagePasswordEnabled', importData.pagePasswordEnabled.toString());
                        }
                        if (importData.pagePassword) {
                            localStorage.setItem('pagePassword', importData.pagePassword);
                        }
                        
                        alert('配置导入成功！页面将刷新。');
                        location.reload();
                    }
                } catch (error) {
                    alert('导入失败：文件格式错误');
                }
            };
            reader.readAsText(file);
            e.target.value = '';
        });

        // ==================== 账户管理 ====================
        // SHA-256 加密函数
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }

        // 显示当前用户
        function updateCurrentUserDisplay() {
            const display = document.getElementById('current-user-display');
            if (currentUser) {
                display.textContent = `${currentUser} (${currentRole === 'admin' ? '管理员' : '普通用户'})`;
            } else {
                display.textContent = '未登录';
            }
        }

        // 加载自定义用户
        function loadCustomUsers() {
            const saved = localStorage.getItem('customUsers');
            if (saved) {
                const customUsers = JSON.parse(saved);
                // 合并到 AUTH_CONFIG
                AUTH_CONFIG.users = [
                    { username: 'admin', password: 'admin123', role: 'admin' },
                    { username: 'user', password: 'user123', role: 'user' },
                    ...customUsers
                ];
            }
        }
        loadCustomUsers();

        // 更新账户信息
        document.getElementById('update-account').addEventListener('click', async () => {
            if (!currentUser) {
                alert('请先登录');
                return;
            }

            const newUsername = document.getElementById('new-username').value.trim();
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;

            // 验证
            if (newPassword && newPassword !== confirmPassword) {
                alert('两次输入的密码不一致');
                return;
            }

            if (newPassword && newPassword.length < 6) {
                alert('密码长度至少6位');
                return;
            }

            // 查找当前用户
            const userIndex = AUTH_CONFIG.users.findIndex(u => u.username === currentUser);
            if (userIndex === -1) {
                alert('用户不存在');
                return;
            }

            // 更新用户信息
            const updatedUser = { ...AUTH_CONFIG.users[userIndex] };
            
            if (newUsername && newUsername !== currentUser) {
                // 检查用户名是否已存在
                if (AUTH_CONFIG.users.some(u => u.username === newUsername)) {
                    alert('该用户名已存在');
                    return;
                }
                updatedUser.username = newUsername;
                currentUser = newUsername;
                localStorage.setItem('currentUser', newUsername);
            }

            if (newPassword) {
                // SHA-256 加密密码
                updatedUser.password = await sha256(newPassword);
            }

            // 保存到自定义用户列表（排除默认用户）
            const customUsers = JSON.parse(localStorage.getItem('customUsers') || '[]');
            const existingIndex = customUsers.findIndex(u => u.username === AUTH_CONFIG.users[userIndex].username);
            
            if (existingIndex !== -1) {
                customUsers[existingIndex] = updatedUser;
            } else {
                customUsers.push(updatedUser);
            }
            
            localStorage.setItem('customUsers', JSON.stringify(customUsers));
            AUTH_CONFIG.users[userIndex] = updatedUser;

            // 清空表单
            document.getElementById('new-username').value = '';
            document.getElementById('new-password').value = '';
            document.getElementById('confirm-password').value = '';

            updateCurrentUserDisplay();
            updateLoginUI();
            alert('账户信息已更新！');
        });

        // ==================== 照片管理 ====================
        let currentPhotoCategory = 'landscape';
        let pendingPhotoFiles = [];

        // 照片分类切换
        document.querySelectorAll('.photo-cat-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.photo-cat-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentPhotoCategory = btn.dataset.cat;
                renderPhotoList();
            });
        });

        // 渲染照片列表
        function renderPhotoList() {
            const grid = document.getElementById('admin-photo-grid');
            const photos = window.galleryData[currentPhotoCategory] || [];
            
            if (photos.length === 0) {
                grid.innerHTML = '<div class="admin-photo-empty">该分类暂无照片</div>';
                return;
            }
            
            grid.innerHTML = photos.map((photo, index) => `
                <div class="admin-photo-item" data-index="${index}">
                    <img src="${photo.src}" alt="${photo.title}">
                    <button class="admin-photo-delete" onclick="deletePhoto(${index})" title="删除">×</button>
                </div>
            `).join('');
        }

        // 删除照片
        window.deletePhoto = function(index) {
            if (!confirm('确定要删除这张照片吗？')) return;
            
            window.galleryData[currentPhotoCategory].splice(index, 1);
            saveGalleryData();
            renderPhotoList();
            renderGallery(currentPhotoCategory);
        };

        // 保存照片数据
        function saveGalleryData() {
            localStorage.setItem('galleryData', JSON.stringify(window.galleryData));
        }

        // 照片文件上传功能
        const photoFileInput = document.getElementById('photo-file-input');
        const photoSelectedText = document.getElementById('photo-selected-text');
        const photoUploadBtn = document.getElementById('photo-upload-btn');
        const photoClearBtn = document.getElementById('photo-clear-btn');
        const photoPendingList = document.getElementById('photo-pending-list');
        const photoPendingContainer = document.getElementById('photo-pending-container');

        // 支持的图片格式
        const ALLOWED_IMAGE_TYPES = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];
        const ALLOWED_IMAGE_EXTS = ['.jpg', '.jpeg', '.png', '.gif', '.webp'];

        function isImageFile(file) {
            if (ALLOWED_IMAGE_TYPES.includes(file.type)) return true;
            const ext = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();
            return ALLOWED_IMAGE_EXTS.includes(ext);
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 B';
            const k = 1024;
            const sizes = ['B', 'KB', 'MB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
        }

        function updatePhotoSelectedDisplay() {
            if (pendingPhotoFiles.length === 0) {
                photoSelectedText.textContent = '未选择文件';
                photoUploadBtn.disabled = true;
                photoClearBtn.style.display = 'none';
                photoPendingList.style.display = 'none';
            } else {
                const validCount = pendingPhotoFiles.filter(f => f.isValid).length;
                photoSelectedText.textContent = `已选择 ${pendingPhotoFiles.length} 个文件（${validCount} 个有效）`;
                photoUploadBtn.disabled = validCount === 0;
                photoClearBtn.style.display = 'inline-block';
                photoPendingList.style.display = 'block';
                renderPhotoPendingList();
            }
        }

        function renderPhotoPendingList() {
            photoPendingContainer.innerHTML = pendingPhotoFiles.map((fileInfo, index) => {
                const icon = fileInfo.isValid ? '🖼️' : '❌';
                const statusClass = fileInfo.isValid ? 'valid' : 'invalid';
                const statusText = fileInfo.isValid ? '有效' : '无效';
                return `
                    <div class="pending-file-item ${fileInfo.isValid ? '' : 'invalid'}">
                        <span class="pending-file-icon">${icon}</span>
                        <span class="pending-file-name ${fileInfo.isValid ? '' : 'invalid'}" title="${fileInfo.name}">${fileInfo.name}</span>
                        <span class="pending-file-size">${formatFileSize(fileInfo.size)}</span>
                        <span class="pending-file-status ${statusClass}">${statusText}</span>
                        <button class="pending-file-remove" onclick="removePendingPhoto(${index})" title="移除">×</button>
                    </div>
                `;
            }).join('');
        }

        window.removePendingPhoto = function(index) {
            pendingPhotoFiles.splice(index, 1);
            updatePhotoSelectedDisplay();
        };

        function clearAllPendingPhotos() {
            if (pendingPhotoFiles.length === 0) return;
            if (confirm(`确定要清空所有 ${pendingPhotoFiles.length} 个待上传文件吗？`)) {
                pendingPhotoFiles = [];
                updatePhotoSelectedDisplay();
                photoFileInput.value = '';
            }
        }

        function handlePhotoFileSelection(files) {
            let filesToProcess = Array.from(files);
            
            const newFiles = filesToProcess.map(file => ({
                file: file,
                isValid: isImageFile(file),
                name: file.name,
                size: file.size
            }));
            
            // 过滤重复文件
            const existingNames = new Set(pendingPhotoFiles.map(f => f.name));
            const uniqueFiles = newFiles.filter(f => !existingNames.has(f.name));
            
            if (uniqueFiles.length < newFiles.length) {
                const duplicates = newFiles.filter(f => existingNames.has(f.name)).map(f => f.name);
                alert(`以下文件已在列表中，已跳过：\n${duplicates.join('\n')}`);
            }
            
            pendingPhotoFiles = pendingPhotoFiles.concat(uniqueFiles);
            updatePhotoSelectedDisplay();
        }

        function executePhotoUpload() {
            const validFiles = pendingPhotoFiles.filter(f => f.isValid);
            
            if (validFiles.length === 0) {
                alert('没有有效的图片文件可上传');
                return;
            }
            
            let uploadedCount = 0;
            
            validFiles.forEach(fileInfo => {
                const reader = new FileReader();
                reader.onload = (e) => {
                    // 添加到当前分类
                    if (!window.galleryData[currentPhotoCategory]) {
                        window.galleryData[currentPhotoCategory] = [];
                    }
                    
                    window.galleryData[currentPhotoCategory].push({
                        src: e.target.result,
                        title: fileInfo.name.replace(/\.[^/.]+$/, ''),
                        desc: '用户上传照片'
                    });
                    
                    uploadedCount++;
                    
                    if (uploadedCount === validFiles.length) {
                        // 所有文件上传完成
                        saveGalleryData();
                        pendingPhotoFiles = [];
                        updatePhotoSelectedDisplay();
                        photoFileInput.value = '';
                        renderPhotoList();
                        renderGallery(currentPhotoCategory);
                        alert(`成功上传 ${uploadedCount} 张照片！`);
                    }
                };
                reader.readAsDataURL(fileInfo.file);
            });
        }

        // 照片文件选择事件
        photoFileInput.addEventListener('change', (e) => {
            if (e.target.files && e.target.files.length > 0) {
                handlePhotoFileSelection(e.target.files);
                e.target.value = '';
            }
        });

        // 照片上传按钮事件
        photoUploadBtn.addEventListener('click', executePhotoUpload);

        // 清空按钮事件
        photoClearBtn.addEventListener('click', clearAllPendingPhotos);

        // 初始化照片列表
        function initPhotoManager() {
            // 从localStorage加载照片数据
            const saved = localStorage.getItem('galleryData');
            if (saved) {
                window.galleryData = JSON.parse(saved);
            }
        }

        // 监听标签切换到照片管理
        document.querySelectorAll('.admin-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                if (tab.dataset.tab === 'photos') {
                    initPhotoManager();
                    renderPhotoList();
                } else if (tab.dataset.tab === 'theme') {
                    loadThemeSettings();
                }
            });
        });

        // ==================== 主题管理 ====================
        // 预设主题定义
        const THEMES = {
            default: {
                primary: '#007AFF',
                bg: '#000000',
                text: '#FFFFFF',
                textSecondary: 'rgba(255, 255, 255, 0.6)',
                border: 'rgba(255, 255, 255, 0.1)',
                cardBg: 'rgba(255, 255, 255, 0.08)',
                font: "'Inter', sans-serif",
                titleSize: '20px',
                bodySize: '14px',
                cardRadius: '16px',
                btnRadius: '25px'
            },
            dark: {
                primary: '#5AC8FA',
                bg: '#0d0d0d',
                text: '#FFFFFF',
                textSecondary: 'rgba(255, 255, 255, 0.5)',
                border: 'rgba(255, 255, 255, 0.08)',
                cardBg: 'rgba(255, 255, 255, 0.05)',
                font: "'Inter', sans-serif",
                titleSize: '20px',
                bodySize: '14px',
                cardRadius: '12px',
                btnRadius: '20px'
            },
            ocean: {
                primary: '#00A8E8',
                bg: '#001524',
                text: '#FFFFFF',
                textSecondary: 'rgba(255, 255, 255, 0.6)',
                border: 'rgba(0, 168, 232, 0.2)',
                cardBg: 'rgba(0, 168, 232, 0.1)',
                font: "'Noto Sans SC', sans-serif",
                titleSize: '22px',
                bodySize: '15px',
                cardRadius: '20px',
                btnRadius: '30px'
            },
            forest: {
                primary: '#2ECC71',
                bg: '#0a1f0d',
                text: '#FFFFFF',
                textSecondary: 'rgba(255, 255, 255, 0.6)',
                border: 'rgba(46, 204, 113, 0.2)',
                cardBg: 'rgba(46, 204, 113, 0.08)',
                font: "'Noto Serif SC', serif",
                titleSize: '20px',
                bodySize: '14px',
                cardRadius: '18px',
                btnRadius: '25px'
            },
            sunset: {
                primary: '#FF6B35',
                bg: '#1a0a05',
                text: '#FFFFFF',
                textSecondary: 'rgba(255, 255, 255, 0.6)',
                border: 'rgba(255, 107, 53, 0.2)',
                cardBg: 'rgba(255, 107, 53, 0.08)',
                font: "'Ma Shan Zheng', cursive",
                titleSize: '24px',
                bodySize: '15px',
                cardRadius: '16px',
                btnRadius: '28px'
            },
            purple: {
                primary: '#A855F7',
                bg: '#0f0518',
                text: '#FFFFFF',
                textSecondary: 'rgba(255, 255, 255, 0.6)',
                border: 'rgba(168, 85, 247, 0.2)',
                cardBg: 'rgba(168, 85, 247, 0.08)',
                font: "'ZCOOL XiaoWei', serif",
                titleSize: '22px',
                bodySize: '14px',
                cardRadius: '24px',
                btnRadius: '30px'
            }
        };

        // 加载主题设置
        function loadThemeSettings() {
            const saved = localStorage.getItem('themeSettings');
            if (saved) {
                const settings = JSON.parse(saved);
                document.getElementById('theme-primary').value = settings.primary || '#007AFF';
                document.getElementById('theme-bg').value = settings.bg || '#000000';
                document.getElementById('theme-text').value = settings.text || '#FFFFFF';
                document.getElementById('theme-text-secondary').value = settings.textSecondary || '#999999';
                document.getElementById('theme-border').value = settings.border || 'rgba(255, 255, 255, 0.1)';
                document.getElementById('theme-card-bg').value = settings.cardBg || 'rgba(255, 255, 255, 0.08)';
                document.getElementById('theme-font-primary').value = settings.font || "'Inter', sans-serif";
                document.getElementById('theme-title-size').value = parseInt(settings.titleSize) || 20;
                document.getElementById('theme-body-size').value = parseInt(settings.bodySize) || 14;
                document.getElementById('theme-card-radius').value = parseInt(settings.cardRadius) || 16;
                document.getElementById('theme-btn-radius').value = parseInt(settings.btnRadius) || 25;
                
                // 更新范围值显示
                updateRangeValues();
            }
        }

        // 更新范围值显示
        function updateRangeValues() {
            document.querySelectorAll('.font-item input[type="range"], .radius-item input[type="range"]').forEach(input => {
                const valueSpan = input.parentElement.querySelector('.range-value');
                if (valueSpan) {
                    valueSpan.textContent = input.value + 'px';
                }
            });
        }

        // 监听范围输入变化
        document.querySelectorAll('.font-item input[type="range"], .radius-item input[type="range"]').forEach(input => {
            input.addEventListener('input', function() {
                const valueSpan = this.parentElement.querySelector('.range-value');
                if (valueSpan) {
                    valueSpan.textContent = this.value + 'px';
                }
            });
        });

        // 预设主题点击
        document.querySelectorAll('.preset-item').forEach(item => {
            item.addEventListener('click', () => {
                const preset = item.dataset.preset;
                const theme = THEMES[preset];
                
                if (theme) {
                    // 更新表单值
                    document.getElementById('theme-primary').value = theme.primary;
                    document.getElementById('theme-bg').value = theme.bg;
                    document.getElementById('theme-text').value = theme.text;
                    document.getElementById('theme-text-secondary').value = theme.textSecondary.includes('rgba') ? '#808080' : theme.textSecondary;
                    document.getElementById('theme-border').value = theme.border.includes('rgba') ? '#333333' : theme.border;
                    document.getElementById('theme-card-bg').value = theme.cardBg.includes('rgba') ? '#1a1a1a' : theme.cardBg;
                    document.getElementById('theme-font-primary').value = theme.font;
                    document.getElementById('theme-title-size').value = parseInt(theme.titleSize);
                    document.getElementById('theme-body-size').value = parseInt(theme.bodySize);
                    document.getElementById('theme-card-radius').value = parseInt(theme.cardRadius);
                    document.getElementById('theme-btn-radius').value = parseInt(theme.btnRadius);
                    
                    updateRangeValues();
                    
                    // 高亮选中的预设
                    document.querySelectorAll('.preset-item').forEach(p => p.classList.remove('active'));
                    item.classList.add('active');
                    
                    // 自动应用主题
                    applyThemeSettings();
                }
            });
        });

        // 应用主题设置
        function applyThemeSettings() {
            const settings = {
                primary: document.getElementById('theme-primary').value,
                bg: document.getElementById('theme-bg').value,
                text: document.getElementById('theme-text').value,
                textSecondary: document.getElementById('theme-text-secondary').value,
                border: document.getElementById('theme-border').value,
                cardBg: document.getElementById('theme-card-bg').value,
                font: document.getElementById('theme-font-primary').value,
                titleSize: document.getElementById('theme-title-size').value + 'px',
                bodySize: document.getElementById('theme-body-size').value + 'px',
                cardRadius: document.getElementById('theme-card-radius').value + 'px',
                btnRadius: document.getElementById('theme-btn-radius').value + 'px'
            };

            // 应用CSS变量
            document.documentElement.style.setProperty('--primary-blue', settings.primary);
            document.documentElement.style.setProperty('--bg-dark', settings.bg);
            document.documentElement.style.setProperty('--text-primary', settings.text);
            document.documentElement.style.setProperty('--text-secondary', settings.textSecondary);
            document.documentElement.style.setProperty('--glass-border', settings.border);
            document.documentElement.style.setProperty('--glass-bg', settings.cardBg);
            document.documentElement.style.setProperty('--theme-font', settings.font);
            document.documentElement.style.setProperty('--theme-title-size', settings.titleSize);
            document.documentElement.style.setProperty('--theme-body-size', settings.bodySize);
            document.documentElement.style.setProperty('--theme-card-radius', settings.cardRadius);
            document.documentElement.style.setProperty('--theme-btn-radius', settings.btnRadius);

            // 应用全局样式
            document.body.style.backgroundColor = settings.bg;
            document.body.style.color = settings.text;
            document.body.style.fontFamily = settings.font;

            // 应用到具体元素
            document.querySelectorAll('.section-title').forEach(el => {
                el.style.fontSize = settings.titleSize;
            });
            document.querySelectorAll('body, .app-name, .gallery-desc').forEach(el => {
                el.style.fontSize = settings.bodySize;
            });
            document.querySelectorAll('.app-item, .gallery-item, .quote-container').forEach(el => {
                el.style.borderRadius = settings.cardRadius;
            });
            document.querySelectorAll('.login-btn, .admin-btn, .action-btn').forEach(el => {
                el.style.borderRadius = settings.btnRadius;
            });

            // 保存到localStorage
            localStorage.setItem('themeSettings', JSON.stringify(settings));
            
            alert('主题已应用！');
        }

        // 应用主题按钮
        document.getElementById('apply-theme').addEventListener('click', applyThemeSettings);

        // 保存为预设按钮
        document.getElementById('save-theme').addEventListener('click', () => {
            const name = prompt('请输入预设主题名称：');
            if (name) {
                const settings = {
                    primary: document.getElementById('theme-primary').value,
                    bg: document.getElementById('theme-bg').value,
                    text: document.getElementById('theme-text').value,
                    textSecondary: document.getElementById('theme-text-secondary').value,
                    border: document.getElementById('theme-border').value,
                    cardBg: document.getElementById('theme-card-bg').value,
                    font: document.getElementById('theme-font-primary').value,
                    titleSize: document.getElementById('theme-title-size').value + 'px',
                    bodySize: document.getElementById('theme-body-size').value + 'px',
                    cardRadius: document.getElementById('theme-card-radius').value + 'px',
                    btnRadius: document.getElementById('theme-btn-radius').value + 'px'
                };
                
                let customThemes = JSON.parse(localStorage.getItem('customThemes') || '{}');
                customThemes[name] = settings;
                localStorage.setItem('customThemes', JSON.stringify(customThemes));
                
                alert(`主题 "${name}" 已保存！`);
            }
        });

        // 恢复默认按钮
        document.getElementById('reset-theme').addEventListener('click', () => {
            if (confirm('确定要恢复默认主题吗？')) {
                localStorage.removeItem('themeSettings');
                
                // 恢复默认CSS变量
                document.documentElement.style.removeProperty('--primary-blue');
                document.documentElement.style.removeProperty('--bg-dark');
                document.documentElement.style.removeProperty('--text-primary');
                document.documentElement.style.removeProperty('--text-secondary');
                document.documentElement.style.removeProperty('--glass-border');
                document.documentElement.style.removeProperty('--glass-bg');
                document.documentElement.style.removeProperty('--theme-font');
                document.documentElement.style.removeProperty('--theme-title-size');
                document.documentElement.style.removeProperty('--theme-body-size');
                document.documentElement.style.removeProperty('--theme-card-radius');
                document.documentElement.style.removeProperty('--theme-btn-radius');
                
                // 恢复默认样式
                document.body.style.backgroundColor = '';
                document.body.style.color = '';
                document.body.style.fontFamily = '';
                
                document.querySelectorAll('.section-title, body, .app-name, .gallery-desc, .app-item, .gallery-item, .quote-container, .login-btn, .admin-btn, .action-btn').forEach(el => {
                    el.style.fontSize = '';
                    el.style.borderRadius = '';
                });
                
                // 重置表单
                document.querySelectorAll('.preset-item').forEach(p => p.classList.remove('active'));
                document.getElementById('theme-primary').value = '#007AFF';
                document.getElementById('theme-bg').value = '#000000';
                document.getElementById('theme-text').value = '#FFFFFF';
                document.getElementById('theme-text-secondary').value = '#999999';
                document.getElementById('theme-border').value = 'rgba(255, 255, 255, 0.1)';
                document.getElementById('theme-card-bg').value = 'rgba(255, 255, 255, 0.08)';
                document.getElementById('theme-font-primary').value = "'Inter', sans-serif";
                document.getElementById('theme-title-size').value = 20;
                document.getElementById('theme-body-size').value = 14;
                document.getElementById('theme-card-radius').value = 16;
                document.getElementById('theme-btn-radius').value = 25;
                updateRangeValues();
                
                alert('已恢复默认主题！');
            }
        });

        // 页面加载时应用保存的主题
        function initTheme() {
            const saved = localStorage.getItem('themeSettings');
            if (saved) {
                const settings = JSON.parse(saved);
                
                // 应用CSS变量
                document.documentElement.style.setProperty('--primary-blue', settings.primary);
                document.documentElement.style.setProperty('--bg-dark', settings.bg);
                document.documentElement.style.setProperty('--text-primary', settings.text);
                document.documentElement.style.setProperty('--text-secondary', settings.textSecondary);
                document.documentElement.style.setProperty('--glass-border', settings.border);
                document.documentElement.style.setProperty('--glass-bg', settings.cardBg);
                document.documentElement.style.setProperty('--theme-font', settings.font);
                document.documentElement.style.setProperty('--theme-title-size', settings.titleSize);
                document.documentElement.style.setProperty('--theme-body-size', settings.bodySize);
                document.documentElement.style.setProperty('--theme-card-radius', settings.cardRadius);
                document.documentElement.style.setProperty('--theme-btn-radius', settings.btnRadius);

                // 应用全局样式
                document.body.style.backgroundColor = settings.bg;
                document.body.style.color = settings.text;
                document.body.style.fontFamily = settings.font;

                // 应用到具体元素
                document.querySelectorAll('.section-title').forEach(el => {
                    el.style.fontSize = settings.titleSize;
                });
                document.querySelectorAll('body, .app-name, .gallery-desc').forEach(el => {
                    el.style.fontSize = settings.bodySize;
                });
                document.querySelectorAll('.app-item, .gallery-item, .quote-container').forEach(el => {
                    el.style.borderRadius = settings.cardRadius;
                });
                document.querySelectorAll('.login-btn, .admin-btn, .action-btn').forEach(el => {
                    el.style.borderRadius = settings.btnRadius;
                });
            }
        }

        // 初始化主题
        initTheme();

        // ==================== 主机管理 ====================
        // 默认主机列表
        const DEFAULT_SERVERS = [
            { name: 'Grafana', url: 'http://localhost:3000', icon: '📊' },
            { name: 'Portainer', url: 'http://localhost:9000', icon: '🐳' },
            { name: 'Jellyfin', url: 'http://localhost:8096', icon: '🎬' },
            { name: 'AList', url: 'http://localhost:5244', icon: '☁️' },
            { name: '青龙面板', url: 'http://localhost:5700', icon: '🤖' }
        ];

        // 加载主机数据
        function loadServers() {
            const saved = localStorage.getItem('serverConfig');
            if (saved) {
                return JSON.parse(saved);
            }
            return JSON.parse(JSON.stringify(DEFAULT_SERVERS));
        }

        // 保存主机数据
        function saveServers(servers) {
            localStorage.setItem('serverConfig', JSON.stringify(servers));
        }

        let serverList = loadServers();

        // 渲染主机列表（在页面上显示）
        function renderServerNav() {
            const grid = document.getElementById('servers-grid');
            if (!grid) return;
            
            if (serverList.length === 0) {
                grid.innerHTML = '<div style="text-align: center; color: rgba(255,255,255,0.4); grid-column: 1/-1; padding: 40px;">暂无主机，请添加</div>';
                return;
            }
            
            grid.innerHTML = serverList.map((server, index) => `
                <a href="${server.url}" class="server-item" target="_blank" data-index="${index}">
                    <div class="server-icon">${server.icon || '🖥️'}</div>
                    <div class="server-info">
                        <div class="server-name">${server.name}</div>
                        <div class="server-url">${server.url}</div>
                    </div>
                    <div class="server-status offline" id="server-status-${index}"></div>
                </a>
            `).join('');
            
            // 开始检测主机状态
            checkServerStatus();
        }

        // 检测主机在线状态
        async function checkServerStatus() {
            const lastCheckEl = document.getElementById('servers-last-check');
            if (!lastCheckEl) return;
            
            const now = new Date();
            lastCheckEl.textContent = `上次检查: ${now.getHours().toString().padStart(2,'0')}:${now.getMinutes().toString().padStart(2,'0')}:${now.getSeconds().toString().padStart(2,'0')}`;
            
            for (let i = 0; i < serverList.length; i++) {
                const statusEl = document.getElementById(`server-status-${i}`);
                if (!statusEl) continue;
                
                statusEl.className = 'server-status checking';
                
                const url = serverList[i].url;
                const isOnline = await pingServer(url);
                
                statusEl.className = isOnline ? 'server-status online' : 'server-status offline';
            }
        }

        // ping服务器
        async function pingServer(url) {
            return new Promise((resolve) => {
                const img = new Image();
                const timeout = 3000;
                
                const timer = setTimeout(() => {
                    img.src = '';
                    resolve(false);
                }, timeout);
                
                img.onload = () => {
                    clearTimeout(timer);
                    resolve(true);
                };
                
                img.onerror = () => {
                    clearTimeout(timer);
                    resolve(false);
                };
                
                // 尝试加载favicon
                const baseUrl = url.replace(/\/$/, '');
                img.src = baseUrl + '/favicon.ico?_=' + Date.now();
            });
        }

        // 渲染主机管理编辑器
        function renderServerEditor() {
            const editor = document.getElementById('servers-editor');
            if (!editor) return;
            
            if (serverList.length === 0) {
                editor.innerHTML = '<div style="text-align: center; color: rgba(255,255,255,0.4); padding: 20px;">暂无主机，请添加</div>';
                return;
            }
            
            editor.innerHTML = serverList.map((server, index) => `
                <div class="server-item-row" data-index="${index}">
                    <div class="server-item-icon" onclick="selectServerIcon(${index})" style="cursor:pointer">${server.icon || '🖥️'}</div>
                    <div class="server-item-inputs">
                        <input type="text" class="server-name-input" value="${server.name || ''}" placeholder="主机名称" onchange="updateServer(${index}, 'name', this.value)">
                        <input type="text" class="server-url-input" value="${server.url || ''}" placeholder="http://..." onchange="updateServer(${index}, 'url', this.value)">
                    </div>
                    <button class="server-delete-btn" onclick="deleteServer(${index})">🗑️</button>
                </div>
            `).join('');
        }

        // 更新主机
        window.updateServer = function(index, field, value) {
            serverList[index][field] = value;
            saveServers(serverList);
            renderServerNav();
        };

        // 删除主机
        window.deleteServer = function(index) {
            if (confirm('确定要删除这个主机吗？')) {
                serverList.splice(index, 1);
                saveServers(serverList);
                renderServerEditor();
                renderServerNav();
            }
        };

        // 添加主机
        document.getElementById('add-server').addEventListener('click', () => {
            serverList.push({ name: '新主机', url: 'http://', icon: '🖥️' });
            saveServers(serverList);
            renderServerEditor();
            renderServerNav();
        });

        // 选择主机图标
        window.selectServerIcon = function(index) {
            const icons = ['🖥️', '📊', '🐳', '🎬', '☁️', '🤖', '🎵', '🔄', '📁', '🗄️', '🌐', '🔧', '📡', '💻', '🖼️', '🎮'];
            const currentIcon = serverList[index].icon || '🖥️';
            let currentIndex = icons.indexOf(currentIcon);
            
            // 循环切换图标
            currentIndex = (currentIndex + 1) % icons.length;
            serverList[index].icon = icons[currentIndex];
            saveServers(serverList);
            renderServerEditor();
            renderServerNav();
        };

        // 监听标签切换到主机管理
        document.querySelectorAll('.admin-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                if (tab.dataset.tab === 'servers') {
                    serverList = loadServers();
                    renderServerEditor();
                }
            });
        });

        // 初始化主机导航
        renderServerNav();

    </script>
</body>
</html>
