<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alix go - è°ƒè¯•ç‰ˆ</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Serif+SC:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-blue: #007AFF;
            --bg-dark: #000000;
            --text-primary: #FFFFFF;
            --text-secondary: rgba(255, 255, 255, 0.6);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; 
            background: var(--bg-dark); 
            color: var(--text-primary); 
            min-height: 100vh;
            padding: 20px;
        }
        
        /* çŠ¶æ€æ  */
        .status-bar { 
            display: flex; 
            gap: 20px; 
            padding: 15px; 
            background: rgba(0, 122, 255, 0.1); 
            border-radius: 12px; 
            margin-bottom: 20px;
        }
        .status-item { display: flex; align-items: center; gap: 8px; }
        .status-icon { 
            width: 32px; height: 32px; 
            background: rgba(0, 122, 255, 0.2); 
            border-radius: 8px; 
            display: flex; align-items: center; justify-content: center;
        }
        
        /* åº”ç”¨å¯¼èˆª */
        .apps-section { margin-bottom: 30px; }
        .section-title { font-size: 14px; color: var(--text-secondary); margin-bottom: 15px; text-transform: uppercase; }
        .apps-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); 
            gap: 14px; 
        }
        .app-item { 
            background: rgba(255, 255, 255, 0.08); 
            border-radius: 16px; 
            padding: 20px; 
            text-align: center; 
            text-decoration: none; 
            color: white;
            transition: all 0.3s;
        }
        .app-item:hover { background: rgba(255, 255, 255, 0.12); transform: translateY(-2px); }
        .app-icon { font-size: 32px; margin-bottom: 8px; }
        .app-name { font-size: 14px; }
        
        /* åº•éƒ¨æ”¶è— */
        .favorites-bar { 
            position: fixed; 
            bottom: 0; left: 0; right: 0; 
            display: flex; 
            justify-content: center; 
            gap: 20px; 
            padding: 15px; 
            background: rgba(255, 255, 255, 0.05); 
            backdrop-filter: blur(10px);
        }
        .fav-item { 
            color: var(--text-secondary); 
            text-decoration: none; 
            font-size: 20px;
            transition: all 0.3s;
        }
        .fav-item:hover { color: white; transform: scale(1.1); }
        
        /* åè¨€åŒºåŸŸ */
        .quote-section { 
            margin: 30px 0; 
            padding: 30px; 
            background: rgba(255, 255, 255, 0.05); 
            border-radius: 16px; 
            text-align: center;
            cursor: pointer;
        }
        .quote-text { font-size: 18px; line-height: 1.6; margin-bottom: 10px; }
        .quote-author { font-size: 14px; color: var(--text-secondary); }
        
        /* æ‘„å½±ä½œå“ */
        .gallery-section { margin: 30px 0; }
        .gallery-tabs { display: flex; gap: 10px; margin-bottom: 15px; }
        .gallery-tab { 
            padding: 8px 16px; 
            background: rgba(255, 255, 255, 0.1); 
            border: none; 
            color: white; 
            border-radius: 8px; 
            cursor: pointer;
        }
        .gallery-tab.active { background: var(--primary-blue); }
        .gallery-grid { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 15px; 
        }
        .gallery-item { 
            aspect-ratio: 3/4; 
            background: rgba(255, 255, 255, 0.1); 
            border-radius: 12px; 
            overflow: hidden;
        }
        .gallery-item img { width: 100%; height: 100%; object-fit: cover; }
        
        .debug-info { 
            position: fixed; 
            top: 10px; right: 10px; 
            background: rgba(255, 0, 0, 0.8); 
            color: white; 
            padding: 10px; 
            border-radius: 8px; 
            font-size: 12px;
            max-width: 300px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="debug-info" id="debug-info">è°ƒè¯•ä¿¡æ¯åŠ è½½ä¸­...</div>
    
    <!-- çŠ¶æ€æ  -->
    <div class="status-bar">
        <div class="status-item">
            <div class="status-icon"><i class="fas fa-calendar"></i></div>
            <span id="current-date">--/--</span>
        </div>
        <div class="status-item">
            <div class="status-icon"><i class="fas fa-clock"></i></div>
            <span id="current-time">--:--</span>
        </div>
        <div class="status-item" id="weather-item" style="cursor: pointer;">
            <div class="status-icon"><i class="fas fa-cloud-sun"></i></div>
            <span id="weather-info">--Â°C</span>
        </div>
    </div>
    
    <!-- åº”ç”¨å¯¼èˆª -->
    <div class="apps-section">
        <div class="section-title">åº”ç”¨å¯¼èˆª</div>
        <div class="apps-grid" id="apps-grid">
            <!-- åŠ¨æ€ç”Ÿæˆ -->
        </div>
    </div>
    
    <!-- æ¯æ—¥åè¨€ -->
    <div class="quote-section" id="quote-container">
        <div class="quote-text" id="quote-text">ç‚¹å‡»åŠ è½½åè¨€...</div>
        <div class="quote-author" id="quote-author"></div>
    </div>
    
    <!-- æ‘„å½±ä½œå“ -->
    <div class="gallery-section">
        <div class="section-title">æ‘„å½±ä½œå“</div>
        <div class="gallery-tabs">
            <button class="gallery-tab active" data-category="landscape">é£æ™¯</button>
            <button class="gallery-tab" data-category="portrait">äººåƒ</button>
            <button class="gallery-tab" data-category="humanity">äººæ–‡</button>
            <button class="gallery-tab" data-category="other">å…¶ä»–</button>
        </div>
        <div class="gallery-grid" id="gallery-grid"></div>
    </div>
    
    <!-- åº•éƒ¨æ”¶è— -->
    <div class="favorites-bar" id="favorites-bar"></div>

    <script>
        // è°ƒè¯•ä¿¡æ¯
        const debugInfo = document.getElementById('debug-info');
        const logs = [];
        
        function log(msg) {
            console.log(msg);
            logs.push(msg);
            debugInfo.textContent = logs.slice(-5).join('\n');
        }
        
        // å…¨å±€é”™è¯¯æ•è·
        window.onerror = function(msg, url, line, col, error) {
            log(`ERROR: ${msg} (line ${line})`);
            return false;
        };
        
        try {
            log('è„šæœ¬å¼€å§‹æ‰§è¡Œ');
            
            // é»˜è®¤é…ç½®
            const DEFAULT_CONFIG = {
                apps: [
                    { icon: 'ğŸ“Š', name: 'Grafana', url: 'http://localhost:3000' },
                    { icon: 'ğŸ³', name: 'Portainer', url: 'http://localhost:9000' },
                    { icon: 'ğŸ¬', name: 'Jellyfin', url: 'http://localhost:8096' },
                    { icon: 'â˜ï¸', name: 'AList', url: 'http://localhost:5244' },
                    { icon: 'ğŸ¤–', name: 'é’é¾™', url: 'http://localhost:5700' },
                    { icon: 'ğŸµ', name: 'Navidrome', url: 'http://localhost:4533' },
                ],
                favorites: [
                    { icon: 'ğŸ™', name: 'GitHub', url: 'https://github.com' },
                    { icon: 'ğŸ’»', name: 'Stack', url: 'https://stackoverflow.com' },
                    { icon: 'ğŸ—£ï¸', name: 'V2EX', url: 'https://www.v2ex.com' },
                    { icon: 'â“', name: 'çŸ¥ä¹', url: 'https://www.zhihu.com' },
                ],
                quotes: [
                    { text: "ç”Ÿæ´»ä¸­ä¸ç¼ºå°‘ç¾ï¼Œåªæ˜¯ç¼ºå°‘å‘ç°ç¾çš„çœ¼ç›ã€‚", author: "ç½—ä¸¹" },
                    { text: "Stay hungry, stay foolish.", author: "Steve Jobs" },
                    { text: "åƒé‡Œä¹‹è¡Œï¼Œå§‹äºè¶³ä¸‹ã€‚", author: "è€å­" },
                ]
            };
            
            // åŠ è½½é…ç½®
            let config;
            try {
                const saved = localStorage.getItem('siteConfig');
                config = saved ? JSON.parse(saved) : JSON.parse(JSON.stringify(DEFAULT_CONFIG));
                log('é…ç½®åŠ è½½æˆåŠŸ');
            } catch(e) {
                config = JSON.parse(JSON.stringify(DEFAULT_CONFIG));
                log('ä½¿ç”¨é»˜è®¤é…ç½®');
            }
            
            // 1. æ—¶é—´æ—¥æœŸ
            function updateDateTime() {
                try {
                    const now = new Date();
                    const beijingTime = new Date(now.toLocaleString("en-US", {timeZone: "Asia/Shanghai"}));
                    const month = beijingTime.getMonth() + 1;
                    const day = beijingTime.getDate();
                    const hours = String(beijingTime.getHours()).padStart(2, '0');
                    const minutes = String(beijingTime.getMinutes()).padStart(2, '0');
                    
                    const dateEl = document.getElementById('current-date');
                    const timeEl = document.getElementById('current-time');
                    
                    if (dateEl) dateEl.textContent = `${month}/${day}`;
                    if (timeEl) timeEl.textContent = `${hours}:${minutes}`;
                } catch(e) {
                    log('æ—¶é—´æ›´æ–°é”™è¯¯: ' + e.message);
                }
            }
            
            setInterval(updateDateTime, 1000);
            updateDateTime();
            log('âœ“ æ—¶é—´æ—¥æœŸå·²å¯åŠ¨');
            
            // 2. å¤©æ°”
            async function getWeather() {
                try {
                    const weatherEl = document.getElementById('weather-info');
                    if (!weatherEl) return;
                    
                    weatherEl.textContent = 'åŠ è½½ä¸­...';
                    
                    // ä½¿ç”¨ä¸€ä¸ªæ›´ç®€å•çš„API
                    const response = await fetch('https://api.open-meteo.com/v1/forecast?latitude=39.9042&longitude=116.4074&current_weather=true');
                    if (response.ok) {
                        const data = await response.json();
                        const temp = Math.round(data.current_weather.temperature);
                        weatherEl.textContent = `åŒ—äº¬ ${temp}Â°C`;
                        log('âœ“ å¤©æ°”åŠ è½½æˆåŠŸ');
                    } else {
                        throw new Error('Weather API error');
                    }
                } catch(e) {
                    log('å¤©æ°”é”™è¯¯: ' + e.message);
                    const weatherEl = document.getElementById('weather-info');
                    if (weatherEl) weatherEl.textContent = 'åŒ—äº¬ --Â°C';
                }
            }
            
            getWeather();
            
            // 3. åº”ç”¨å¯¼èˆª
            function renderApps() {
                try {
                    const grid = document.getElementById('apps-grid');
                    if (!grid) {
                        log('é”™è¯¯: æ‰¾ä¸åˆ° apps-grid');
                        return;
                    }
                    
                    grid.innerHTML = config.apps.map(app => `
                        <a href="${app.url}" class="app-item" target="_blank">
                            <div class="app-icon">${app.icon}</div>
                            <div class="app-name">${app.name}</div>
                        </a>
                    `).join('');
                    log('âœ“ åº”ç”¨å¯¼èˆªå·²æ¸²æŸ“');
                } catch(e) {
                    log('åº”ç”¨å¯¼èˆªé”™è¯¯: ' + e.message);
                }
            }
            
            renderApps();
            
            // 4. åº•éƒ¨æ”¶è—
            function renderFavorites() {
                try {
                    const bar = document.getElementById('favorites-bar');
                    if (!bar) return;
                    
                    bar.innerHTML = config.favorites.map(fav => `
                        <a href="${fav.url}" class="fav-item" target="_blank" title="${fav.name}">${fav.icon}</a>
                    `).join('');
                    log('âœ“ æ”¶è—å·²æ¸²æŸ“');
                } catch(e) {
                    log('æ”¶è—é”™è¯¯: ' + e.message);
                }
            }
            
            renderFavorites();
            
            // 5. æ¯æ—¥åè¨€
            let currentQuoteIndex = 0;
            
            function showQuote() {
                try {
                    const textEl = document.getElementById('quote-text');
                    const authorEl = document.getElementById('quote-author');
                    
                    if (!textEl || !authorEl) return;
                    
                    const quote = config.quotes[currentQuoteIndex % config.quotes.length];
                    textEl.textContent = quote.text;
                    authorEl.textContent = 'â€” ' + quote.author;
                } catch(e) {
                    log('åè¨€é”™è¯¯: ' + e.message);
                }
            }
            
            document.getElementById('quote-container').addEventListener('click', () => {
                currentQuoteIndex++;
                showQuote();
                log('åè¨€å·²åˆ‡æ¢');
            });
            
            showQuote();
            log('âœ“ åè¨€å·²æ˜¾ç¤º');
            
            // 6. æ‘„å½±ä½œå“
            const galleryImages = {
                landscape: [
                    { url: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=500&fit=crop', title: 'é˜¿å°”å‘æ–¯å±±' },
                    { url: 'https://images.unsplash.com/photo-1433086966358-54859d0ed716?w=400&h=500&fit=crop', title: 'ç€‘å¸ƒæ£®æ—' },
                    { url: 'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=400&h=500&fit=crop', title: 'è¿·é›¾å±±è°·' },
                ],
                portrait: [
                    { url: 'https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=400&h=500&fit=crop', title: 'å…‰å½±è‚–åƒ' },
                    { url: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=400&h=500&fit=crop', title: 'åŸå¸‚å¥³å­©' },
                    { url: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=500&fit=crop', title: 'é˜³å…‰å°‘å¹´' },
                ],
                humanity: [
                    { url: 'https://images.unsplash.com/photo-1516826957135-700dedea698c?w=400&h=500&fit=crop', title: 'è€è¡—å··å¼„' },
                    { url: 'https://images.unsplash.com/photo-1517457373958-b7bdd4587205?w=400&h=500&fit=crop', title: 'å¸‚é›†çƒ­é—¹' },
                    { url: 'https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=400&h=500&fit=crop', title: 'å·¥åŒ æ‰‹è‰º' },
                ],
                other: [
                    { url: 'https://images.unsplash.com/photo-1550684848-fac1c5b4e853?w=400&h=500&fit=crop', title: 'éœ“è™¹éƒ½å¸‚' },
                    { url: 'https://images.unsplash.com/photo-1494438639946-1ebd1d20bf85?w=400&h=500&fit=crop', title: 'æç®€å»ºç­‘' },
                    { url: 'https://images.unsplash.com/photo-1558591710-4b4a1ae0f04d?w=400&h=500&fit=crop', title: 'æŠ½è±¡è‰²å½©' },
                ]
            };
            
            let currentCategory = 'landscape';
            
            function renderGallery(category) {
                try {
                    const grid = document.getElementById('gallery-grid');
                    if (!grid) return;
                    
                    const images = galleryImages[category];
                    grid.innerHTML = images.map(img => `
                        <div class="gallery-item">
                            <img src="${img.url}" alt="${img.title}" loading="lazy">
                        </div>
                    `).join('');
                    log('âœ“ ç”»å»Šå·²æ¸²æŸ“: ' + category);
                } catch(e) {
                    log('ç”»å»Šé”™è¯¯: ' + e.message);
                }
            }
            
            document.querySelectorAll('.gallery-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.gallery-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    currentCategory = tab.dataset.category;
                    renderGallery(currentCategory);
                });
            });
            
            renderGallery('landscape');
            
            log('=== æ‰€æœ‰æ¨¡å—åˆå§‹åŒ–å®Œæˆ ===');
            
        } catch(e) {
            log('ä¸¥é‡é”™è¯¯: ' + e.message);
            console.error(e);
        }
    </script>
</body>
</html>